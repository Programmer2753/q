<!DOCTYPE html>
<html>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <title>Schedule</title>
    </head>
    <body>
        <style>
            @import url('https://fonts.google.com/specimen/Montserrat');
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Montserrat';
            }

            body {
                margin: 0;
                font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
                cursor: url('cursor321.png'), auto;
            }

            a, button, span, li, td {
                cursor: url("hand_cursor321.png"), auto;
            }

            input, label, p, h1, h2, h3, h4, h5, h6 {
            cursor: url('text_cursor321.png'), auto;
            }

            .button {
                position: relative;
                display: flex;
                justify-content: center;
                align-items: center;
                width: 289px;
                height: 88px;
                border-radius: 99px;
                border: 3px solid hsla(0, 0%, 100%, 0.3);
                background: hsla(0, 0%, 100%, 0.1);
                backdrop-filter: blur(1px);
                box-shadow:
                    inset 0 0 8px 1px hsla(0, 0%, 100%, 0.3),
                    0 8px 20px rgba(0, 0, 0, 0.25);
                transition: transform 0.3s ease, box-shadow 0.3s ease;
                text-decoration: none;
                cursor: url("hand_cursor321.png"), auto;
            }

            .home-header {
                position: fixed;
                justify-content: space-between;
                align-items: center;
                display: flex;
                height: 65px;
                padding: 0 25px;
                border-bottom: 1px solid #ddd;
                inset: 0 0 auto 0;
                z-index: 10000;
                backdrop-filter: blur(12px);
            }

            .left {
                display: flex;
                align-items: center;
                gap: 35px;
            }

            .logo img {
                height: 42px;
            }

            nav {
                display: flex;
                gap: 28px;
            }

            nav a,
            .login {
                color: black;
                font-size: 15px;
                font-weight: 500;
                text-decoration: none;
                transition: 0.2s ease;
            }

            nav a:hover,
            .login:hover {
                text-decoration: underline;
                text-decoration-color: black;
                text-underline-offset: 3px;
            }

            .right {
                display: flex;
                align-items: center;
                gap: 18px;
            }

            .auth-buttons {
                display: flex;
                align-items: center;
                gap: 18px;
            }

            .btn-start {
                background: black;
                color: white;
                border: none;
                padding: 10px 18px;
                font-weight: 600;
                border-radius: 10px;
                display: flex;
                align-items: center;
                gap: 8px;
                transition:
                border-radius 0.25s ease,
                padding 0.25s ease,
                gap 0.3s ease;
                text-decoration: none;
            }

            .btn-start .arrow {
                opacity: 0;
                transform: translateX(-6px);
                transition: 0.3s ease;
            }

            .btn-start .text {
                transition: 0.3s ease;
            }

            .btn-start:hover {
                border-radius: 0px;
                padding-left: 25px;
            }

            .btn-start:hover .arrow {
                opacity: 1;
                transform: translateX(0);
            }

            .btn-start:hover .text {
                transform: translateX(6px);
            }

            .user-info {
                position: relative;
            }

            .user-trigger {
                display: flex;
                align-items: center;
                gap: 6px;
                padding: 4px 8px;
                border-radius: 999px;
                background: rgba(0, 0, 0, 0.04);
                cursor: url("hand_cursor321.png"), auto;
                transition: background 0.2s ease;
            }

            .user-trigger:hover {
                background: rgba(0, 0, 0, 0.08);
            }


            .user-avatar {
                position: relative;
                width: 36px;
                height: 36px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .avatar-letter {
                color: #fff;
                font-weight: 600;
                font-size: 16px;
                text-transform: uppercase;
            }

            .avatar-status {
                position: absolute;
                bottom: 0;
                right: 0;
                width: 9px;
                height: 9px;
                background: #3bd671;
                border-radius: 50%;
                border: 2px solid #fff;
            }

            .avatar-arrow {
                font-size: 12px;
                color: #444;
                transform: rotate(180deg);
                transition: transform 0.2s ease;
            }

            .user-menu {
                position: absolute;
                top: calc(100% + 10px);
                right: 0;
                width: 220px;
                background: #1e1e1e;
                border: 1px solid #333;
                border-radius: 10px;
                padding: 6px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.5);
                display: none;
                flex-direction: column;
                z-index: 10000;
            }

            .user-menu.open {
                display: flex;
            }

            .menu-item {
                background: transparent;
                border: none;
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 10px 12px;
                font-size: 14px;
                color: #eee;
                border-radius: 8px;
                transition: all 0.2s ease;
                width: 100%;
                text-align: left;
            }

            .menu-item:hover {
                background: #2d2d2d;
            }

            .menu-item .menu-icon {
                width: 18px;
                height: 18px;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0.7;
            }

            .menu-item .menu-icon img {
                max-width: 100%;
                max-height: 100%;
            }

            .menu-divider {
                height: 1px;
                background: #333;
                margin: 6px 8px;
            }

            .logout-item {
                color: #ff5f5f !important;
            }

            .logout-item:hover {
                background: rgba(255, 95, 95, 0.1) !important;
            }

            .logout-item .menu-icon {
                opacity: 1;
            }

            .modal-overlay-log {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.35);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 9999;
            }

            .modal-overlay-start {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.35);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 9999;
            }

            .reset-password {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.35);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 9999;
            }

            .modal {
                background: white;
                width: 380px;
                padding: 40px 35px;
                border-radius: 12px;
                position: relative;
                box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            }

            .close-btn {
                position: absolute;
                right: 18px;
                top: 18px;
                font-size: 26px;
            }

            .modal h2 {
                text-align: center;
                margin-top: 0;
                margin-bottom: 25px;
                font-size: 26px;
            }

            .google-btn {
                width: 100%;
                padding: 12px;
                border-radius: 12px;
                font-size: 16px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                background: white;
                border: 1.5px solid #cfcfcf;
                text-decoration: none;
                color: black;
            }

            .divider {
                text-align: center;
                margin: 18px 0;
                color: #888;
            }

            .email-input {
                width: 100%;
                padding: 12px;
                font-size: 14px;
                background: #ececec;
                border-radius: 10px;
                border: none;
                outline: none;
                margin-bottom: 25px;
            }

            .dark-input {
                background: #2a2a2c !important;
                color: #e6e6e6;
                border: 1px solid #3a3a3c !important;
                margin-bottom: 0 !important;
            }

            .dark-input:focus {
                border-color: #6366f1 !important;
                box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            }

            .dark-input::placeholder {
                color: #5a5a5a;
            }

            .email-btn {
                width: 100%;
                background: black;
                color: white;
                border: none;
                padding: 12px;
                font-size: 17px;
                font-weight: 600;
                border-radius: 12px;

                display: flex;
                justify-content: center;
                align-items: center;
                gap: 7px;

                transition:
                padding 0.25s ease,
                border-radius 0.25s ease,
                gap 0.25s ease;
            }

            .email-btn span.arrow {
                opacity: 0;
                transform: translateX(-6px);
                transition: 0.25s ease;
            }

            .email-btn:hover {
                border-radius: 0;
                padding-left: 22px;
            }

            .email-btn:hover span.arrow {
                opacity: 1;
                transform: translateX(0);
            }

            .email-btn:hover span.txt {
                transform: translateX(6px);
                transition: 0.25s ease;
            }

            .dop-links p{
                font-size: 16px;
                align-items: center;
                justify-content: center;
                gap: 18px;
                text-decoration: none;
                color: black;
            }

            .dop-links a{
                font-size: 16px;
                align-items: center;
                justify-content: center;
                gap: 18px;
                text-decoration: none;
                color: rgb(0, 64, 255);
            }




            .footer {
                background: #000;
                color: #fff;
                padding: 90px 0;
            }


            .footer-inner {
                max-width: 1440px;
                margin: 0 auto;
                padding: 0 96px;
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
            }

            .footer-left {
                max-width: 420px;
                display: flex;
                flex-direction: column;
                gap: 36px;
            }

            .footer-title {
                font-size: 56px;
                font-weight: 600;
                line-height: 1.05;
                letter-spacing: -0.02em;
            }



            .footer-btn {
                background: black;
                color: white;
                border: 1px solid #fff;
                padding: 14px 26px;
                font-weight: 600;
                border-radius: 8px;
                font-size: 18px;
                display: flex;
                align-items: center;
                gap: 8px;
                transition:
                border-radius 0.25s ease,
                padding 0.25s ease,
                gap 0.3s ease;
                text-decoration: none;
            }

            .footer-btn .arrow {
                opacity: 0;
                transform: translateX(-6px);
                transition: 0.3s ease;
            }

            .footer-btn .text {
                transition: 0.3s ease;
            }

            .footer-btn:hover {
                border-radius: 0px;
                padding-left: 25px;
            }

            .footer-btn:hover .arrow {
                opacity: 1;
                transform: translateX(0);
            }

            .footer-btn:hover .text {
                transform: translateX(6px);
            }



            .footer-columns {
                display: flex;
                gap: 96px;
            }

            .footer-col {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .footer-col h4 {
                font-size: 12px;
                font-weight: 500;
                letter-spacing: 0.08em;
                color: #9b9b9b;
                margin-bottom: 18px;
            }

            .footer-col a {
                color: #fff;
                text-decoration: none; 
                font-size: 16px;
                font-weight: 500;
                line-height: 1.9;
            }

            .footer-col a:hover {
                text-decoration: underline; 
                text-decoration-color: #fff;
                text-underline-offset: 3px;
            }

            .social-icons {
                display: flex;
                gap: 16px;
            }

            .social-btn {
                width: 45px;
                height: 45px;
                background: #3a3a3a;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: 0.3s;
            }

            .social-btn img {
                width: 24px;
            }

            .social-btn:hover {
                background: #575757;
                transform: translateY(-4px);
            }

            .language-selector {
                position: relative;
            }

            .lang-btn {
                background: none;
                border: none;
                color: #fff;
                font-size: 18px;
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .lang-btn .arrow {
                font-size: 12px;
            }

            .lang-dropdown {
                list-style: none;
                padding: 10px 0;
                margin: 0;

                position: absolute;
                bottom: calc(100% + 8px);
                left: 0;
                top: auto;

                background: #222;
                border-radius: 8px;
                width: 150px;

                display: none;
                z-index: 1000;
            }

            .lang-dropdown li {
                padding: 10px 15px;
                color: #fff;
                transition: 0.2s;
            }

            .lang-dropdown li:hover {
                background: #444;
            }

            .lang-dropdown.show {
                display: block;
            }

            #notificationContainer {
                position: fixed;
                top: 80px;
                right: 20px;
                z-index: 999;
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .custom-notification {
                background: #1a1a1a;
                color: white;
                padding: 16px 20px;
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
                display: flex;
                align-items: center;
                gap: 12px;
                animation: slideIn 0.3s ease-out;
                border-left: 4px solid;
                min-width: 320px;
                pointer-events: auto;
            }

            .custom-notification.success {
                border-left-color: #10b981;
            }

            .custom-notification.error {
                border-left-color: #ef4444;
            }

            .custom-notification.info {
                border-left-color: #3b82f6;
            }

            .custom-notification-icon {
                font-size: 24px;
                flex-shrink: 0;
            }

            .custom-notification.success .custom-notification-icon {
                color: #10b981;
            }

            .custom-notification.error .custom-notification-icon {
                color: #ef4444;
            }

            .custom-notification.info .custom-notification-icon {
                color: #3b82f6;
            }

            .custom-notification-message {
                flex: 1;
                font-size: 15px;
                font-weight: 500;
                line-height: 1.4;
            }

            .custom-notification-close {
                font-size: 20px;
                color: #888;
                transition: color 0.2s;
                flex-shrink: 0;
                padding: 0 4px;
                cursor: url("hand_cursor321.png"), auto;
            }

            .custom-notification-close:hover {
                color: white;
            }

            @keyframes slideIn {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }

            .custom-notification.removing {
                animation: slideOut 0.3s ease-out forwards;
            }


            .hero-section {
                position: relative;
                min-height: calc(100vh - 75px);
                display: flex;
                align-items: center;
                justify-content: center;
                overflow: hidden;
                background: linear-gradient(180deg, #ffffff 0%, #f8f9ff 100%);
                padding: 60px 40px;
            }

            .hero-content {
                position: relative;
                z-index: 10;
                text-align: center;
                max-width: 900px;
                animation: fadeInUp 0.8s ease-out;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .hero-title {
                font-size: 72px;
                font-weight: 700;
                line-height: 1.1;
                margin: 0 0 24px 0;
                color: #000;
                letter-spacing: -0.02em;
            }

            .hero-subtitle {
                font-size: 24px;
                line-height: 1.5;
                color: #666;
                margin: 0 0 40px 0;
                font-weight: 400;
            }

            .hero-btn {
                background: black;
                color: white;
                border: none;
                padding: 18px 34px;
                font-weight: 700;
                font-size: 18px;
                border-radius: 16px;
                display: inline-flex;
                align-items: center;
                gap: 14px;
                transition:
                border-radius 0.25s ease,
                padding 0.25s ease,
                gap 0.3s ease;
                text-decoration: none;
            }

            .hero-btn .text {
                transition: 0.3s ease;
            }

            .hero-btn .arrow {
                font-size: 22px;
                opacity: 0;
                transform: translateX(-10px);
                transition: 0.3s ease;
                line-height: 1;
            }

            .hero-btn:hover {
                border-radius: 0px;
                padding-left: 46px;
            }

            .hero-btn:hover .arrow {
                opacity: 1;
                transform: translateX(0);
            }

            .hero-btn:hover .text {
                transform: translateX(10px);
            }


            .decorative-shapes {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 1;
            }

            .shape {
                position: absolute;
                border-radius: 50%;
                animation: float 20s infinite ease-in-out;
            }

            @keyframes float {
                0%, 100% {
                    transform: translate(0, 0) rotate(0deg);
                }
                25% {
                    transform: translate(20px, -20px) rotate(90deg);
                }
                50% {
                    transform: translate(-10px, 10px) rotate(180deg);
            }
                75% {
                    transform: translate(30px, 5px) rotate(270deg);
                }
            }

            .shape-1 {
                width: 200px;
                height: 200px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                top: 10%;
                left: 5%;
                opacity: 0.15;
                animation-delay: 0s;
            }

            .shape-2 {
                width: 150px;
                height: 150px;
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                top: 60%;
                left: 10%;
                opacity: 0.2;
                animation-delay: 2s;
                border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            }

            .shape-3 {
                width: 120px;
                height: 120px;
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                top: 20%;
                right: 15%;
                opacity: 0.18;
                animation-delay: 4s;
            }

            .shape-4 {
                width: 180px;
                height: 180px;
                background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
                bottom: 15%;
                right: 8%;
                opacity: 0.15;
                animation-delay: 1s;
                border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
            }

            .shape-5 {
                width: 100px;
                height: 100px;
                background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
                top: 45%;
                right: 25%;
                opacity: 0.2;
                animation-delay: 3s;
            }

            .shape-6 {
                width: 140px;
                height: 140px;
                background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
                bottom: 25%;
                left: 20%;
                opacity: 0.12;
                animation-delay: 5s;
                border-radius: 48% 52% 35% 65% / 59% 50% 50% 41%;
            }

            .shape-7 {
                width: 90px;
                height: 90px;
                background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                top: 35%;
                left: 35%;
                opacity: 0.15;
                animation-delay: 2.5s;
            }

            .shape-8 {
                width: 110px;
                height: 110px;
                background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
                bottom: 40%;
                right: 35%;
                opacity: 0.18;
                animation-delay: 4.5s;
                border-radius: 35% 65% 72% 28% / 36% 55% 45% 64%;
            }

            .schedule-main {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
                font-family: Inter, system-ui, -apple-system, sans-serif;

                background: #0f0f10;
                color: #e6e6e6;
                display: flex;
                height: 100vh;
                width: 100vw;
                position: fixed;
                top: 0;
                left: 0;
                overflow: hidden;
            }

            #landingPage {
                display: flex;
                flex-direction: column;
                width: 100%;
                min-height: 100vh;
            }

            #dashboardPage {
                display: none;
            }

            .sidebar {
                width: 72px;
                background: #0b0b0c;
                border-right: 1px solid #1e1e1f;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 16px 0;
                gap: 18px;
            }

            .sidebar-icon {
                width: 36px;
                height: 36px;
                border-radius: 10px;
                background: #1a1a1c;
            }

            .main {
                flex: 1;
                display: flex;
                flex-direction: column;
            }

            .main-window {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            .topbar {
                height: 64px;
                border-bottom: 1px solid #1e1e1f;
                display: flex;
                align-items: center;
                padding: 0 24px;
                justify-content: space-between;
                gap: 20px;
            }

            .breadcrumbs {
                display: flex;
                gap: 8px;
                font-size: 14px;
                color: #b5b5b5;
            }

            .breadcrumbs span {
                color: #fff;
            }

            .top-actions {
                display: flex;
                gap: 10px;
            }

            .top-btn {
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                padding: 6px 12px;
                border-radius: 8px;
                font-size: 13px;
                color: #e6e6e6;
            }

            .view-tabs {
                display: flex;
                gap: 16px;
                padding: 14px 24px;
                border-bottom: 1px solid #1e1e1f;
            }

            .view-tab {
                display: flex;
                align-items: center;
                font-size: 14px;
                color: #9a9a9a;
                cursor: url("hand_cursor321.png"), auto;
            }

            .view-tab.active {
                color: #fff;
                font-weight: 500;
            }

            .view-tab img {
                width: 18px;
                height: 18px;
                display: block;
            }


            .table-wrapper {
                padding: 24px;
                overflow-y: auto;
            }

            .table {
                width: 100%;
                border-collapse: collapse;
                table-layout: fixed;
            }

            .table thead th {
                text-align: left;
                font-size: 12px;
                color: #9a9a9a;
                padding: 10px 8px;
                font-weight: 500;
            }

            .table tbody tr {
                height: 44px;
                transition: background 0.15s;
            }

            .table tbody tr:hover {
                background: #161618;
            }

            .table td {
                padding: 8px;
                font-size: 14px;
                border-bottom: 1px solid #1e1e1f;
            }

            .table td:nth-child(2),
            .table td:nth-child(3),
            .table td:nth-child(4),
            .table td:nth-child(6) {
                width: auto;
            }

            .group-row td {
                padding: 16px 8px 8px;
                font-size: 13px;
                color: #9a9a9a;
                border-bottom: none;
            }

            .group-badge {
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .group-dot {
                width: 14px;
                height: 14px;
                border-radius: 50%;
                background: #3b82f6;
            }

            .name-cell {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .check {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid #374151;
            }

            .check.checked {
            background: #22c55e;
            border-color: #22c55e;
            }

            .status {
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 600;
            }

            .status:hover {
                outline: 1px solid rgb(139, 139, 139);
            }

            .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            }

            .dot-todo { background: #6b7280; }
            .dot-progress { background: #3b82f6; }
            .dot-done { background: #22c55e; }

            .status.todo {
            background: #2a2a2a;
            color: #9ca3af;
            }

            .status.progress {
            background: #1e3a8a;
            color: #93c5fd;
            }

            .status.done {
            background: #14532d;
            color: #86efac;
            }

            .status-menu {
            position: absolute;
            background: #111;
            color: white;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            padding: 6px;
            width: 180px;
            z-index: 1000;
            }

            .status-item {
            padding: 8px 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: url("hand_cursor321.png"), auto;
            }

            .status-item:hover {
            background: #1f1f1f;
            }

            .task-status-dot {
            width: 10px;
            height: 10px;
            background: currentColor;
            display: inline-block;
            flex-shrink: 0;
            }

            .type-task {
            border-radius: 50%;
            }

            .type-milestone {
            transform: rotate(45deg);
            }

            .type-form {
            border-radius: 3px;
            }

            .type-meeting {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            }

            .dot-done { color: #22c55e; }
            .dot-progress { color: #3b82f6; }
            .dot-todo { color: #9ca3af; }

            .icon {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            background: #2a2a2c;
            display: flex;
            align-items: center;
            justify-content: center;
            }


            .add-task-row {
                background: transparent;
            }

            .add-task-row td {
                padding: 12px 8px;
                vertical-align: middle;
            }

            .add-task-row td:last-child {
                white-space: nowrap;
            }

            .add-task-row .name-cell {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .add-task-row .task-name-input {
                background: transparent;
                border: none;
                outline: none;
                color: inherit;
                font-size: inherit;
                font-family: inherit;
                width: 100%;
            }

            .add-task-btn {
            background: transparent;
            border: none;
            color: #9ca3af;
            font-size: 14px;
            padding: 6px 4px;
            }

            .add-task-btn:hover {
            color: #fff;
            }

            .add-task-input {
            display: flex;
            align-items: center;
            gap: 10px;

            background: #0b0b0b;
            border: 1px solid #1f1f1f;
            border-radius: 12px;

            padding: 10px 12px;
            }

            .task-name-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;

            color: #e5e7eb;
            font-size: 14px;
            }

            .task-name-input::placeholder {
            color: #6b7280;
            }

            .actions {
                white-space: nowrap;
            }

            .actions button {
            background: #0f172a;
            border: 1px solid #1f2937;
            color: #9ca3af;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 8px;
            }

            .actions button:hover {
            color: #fff;
            border-color: #374151;
            }

            .add-task-actions {
            display: flex;
            flex-direction: row; 
            align-items: center;
            gap: 8px;
            }


            .task-save {
            background: #fff;
            color: #000;
            border: none;
            border-radius: 8px;
            padding: 4px 10px;
            font-size: 13px;
            }

            .task-save:hover{
                opacity: 0.7;
            }

            .task-cancel {
            background: none;
            border: none;
            padding: 0 6px;

            font-size: 13px;
            color: #9ca3af;
            opacity: 0.7;
            }

            .task-cancel:hover {
            opacity: 1;
            }

            .add-task-icon {
            width: 26px;
            height: 26px;
            border-radius: 6px;
            border: 1px solid #1f1f1f;
            background: #0b0b0b;

            display: flex;
            align-items: center;
            justify-content: center;
            }

            .add-task-icon img {
            width: 24px;
            height: 24px;
            opacity: 1;
            }


            .icon-cell {
                width: 32px;
                height: 32px;
                padding: 0;
                background-repeat: no-repeat;
                background-position: center;
                background-size: 18px 18px;
                cursor: url("hand_cursor321.png"), auto;
            }

            .icon-cell:hover {
                outline: 1px solid rgb(139, 139, 139);
            }

            .icon-cell.priority {
                outline: 1px solid blue;
            }

            .icon-cell img {
            width: 24px;
            height: 24px;
            }

            .task-type-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            user-select: none;
            }

            .task-type-label {
            font-size: 12px;
            color: #d1d5db;
            white-space: nowrap;
            }

            .task-type-icon {
            width: 10px;
            height: 10px;
            display: inline-block;
            background: currentColor;
            }

            .task-type-icon.type-task {
            border-radius: 50%;
            }

            .task-type-icon.type-milestone {
            transform: rotate(45deg);
            }

            .task-type-icon.type-form {
            border-radius: 3px;
            }

            .task-type-icon.type-meeting {
            width: 12px;
            height: 6px;
            border-radius: 2px;
            }

            .status-done    { color: #22c55e; }
            .status-progress { color: #3b82f6; }
            .status-todo    { color: #9ca3af; }

            .task-type-menu {
            position: absolute;
            background: #111;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            padding: 6px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            z-index: 2000;
            }

            .task-type-menu button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: none;
            color: #e5e7eb;
            padding: 6px 8px;
            }

            .task-type-menu button:hover {
            background: #1f1f1f;
            }

            .task-type-sub-menu {
            background: #1e1e1e !important;
            border: 1px solid #333 !important;
            min-width: 150px;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
            }

            .task-type-sub-menu .task-type-icon {
            width: 12px;
            height: 12px;
            flex-shrink: 0;
            }

            .task-type-sub-menu-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: none;
            color: #e5e7eb;
            padding: 8px 12px;
            width: 100%;
            text-align: left;
            }

            .task-type-sub-menu-btn:hover {
            background-color: #333 !important;
            color: #fff;
            }

            .priority-menu {
            position: absolute;
            background: #111;
            color: white;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            padding: 6px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            z-index: 2000;
            }

            .priority-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            }

            .priority-label {
            font-size: 12px;
            color: #cfcfcf;
            white-space: nowrap;
            }

            .priority-menu button {
            min-width: 140px;
            height: 34px;
            padding: 0 10px;
            border-radius: 8px;
            background: transparent;
            border: none;

            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: flex-start;

            color: #eaeaea;
            font-size: 13px;
            }

            .priority-menu button:hover {
            background: #1f1f1f;
            }

            .priority-menu img {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
            }

            .priority-btn img {
                width: 24px;
                height: 24px;
            }


            .sidebar {
                justify-content: space-between;
            }

            .sidebar-top,
            .sidebar-bottom {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 18px;
            }

            .sidebar-toggle {
                color: #aaa;
                font-size: 20px;
                margin-bottom: 10px;
            }

            .sidebar-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 6px;
                font-size: 11px;
                color: #aaa;
            }

            .sidebar-item span {
                font-size: 11px;
            }

            .sidebar-item:hover {
                color: #fff;
            }

            .sidebar .icon {
                width: 36px;
                height: 36px;
                border-radius: 12px;
                background: #1a1a1c;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 16px;
                position: relative;
                cursor: url("hand_cursor321.png"), auto;
            }

            .sidebar-item.active .icon {
                background: radial-gradient(circle at center, #6ee7ff, #6366f1);
            }

            .sidebar-item.active span {
                color: #fff;
            }

            .icon.glow {
                box-shadow: 0 0 20px rgba(99,102,241,0.8);
            }

            .icon.badge .dot {
                position: absolute;
                top: 6px;
                right: 6px;
                width: 8px;
                height: 8px;
                background: #ff3b3b;
                border-radius: 50%;
            }

            .sidebar-item.upgrade .icon {
                background: #0ea5e9;
                color: #000;
            }



            .dashboard-view {
                flex: 1;
                display: none;
                flex-direction: column;
                background: #0f0f10;
                overflow-y: auto;
                padding: 32px;
            }

            .dashboard-container {
                max-width: 1400px;
                width: 100%;
                margin: 0 auto;
            }

            .dashboard-header {
                margin-bottom: 32px;
            }

            .dashboard-header h1 {
                font-size: 36px;
                font-weight: 700;
                color: #e6e6e6;
                margin: 0 0 8px 0;
            }

            .dashboard-subtitle {
                font-size: 16px;
                color: #9a9a9a;
                margin: 0;
            }

            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 24px;
                margin-bottom: 32px;
            }

            .stat-card {
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 16px;
                padding: 24px;
                display: flex;
                align-items: center;
                gap: 20px;
                transition: all 0.3s;
            }

            .stat-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
                border-color: #3a3a3c;
            }

            .stat-icon {
                width: 64px;
                height: 64px;
                border-radius: 16px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 28px;
                flex-shrink: 0;
            }

            .stat-content {
                flex: 1;
            }

            .stat-value {
                font-size: 32px;
                font-weight: 700;
                color: #e6e6e6;
                margin: 0 0 4px 0;
            }

            .stat-label {
                font-size: 14px;
                color: #9a9a9a;
                margin: 0;
            }

            .charts-row {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                gap: 24px;
                margin-bottom: 32px;
            }

            .chart-card {
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 16px;
                padding: 24px;
            }

            .chart-title {
                font-size: 20px;
                font-weight: 600;
                color: #e6e6e6;
                margin: 0 0 24px 0;
            }

            .progress-chart {
                width: 100%;
            }

            .progress-bar-container {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .progress-item {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .progress-label {
                display: flex;
                justify-content: space-between;
                font-size: 13px;
                color: #b5b5b5;
                font-weight: 500;
            }

            .progress-bar {
                width: 100%;
                height: 12px;
                background: #2a2a2c;
                border-radius: 6px;
                overflow: hidden;
            }

            .progress-fill {
                height: 100%;
                border-radius: 6px;
                transition: width 0.6s ease;
            }

            .todo-fill {
                background: linear-gradient(90deg, #6b7280 0%, #9ca3af 100%);
            }

            .progress-fill-bar {
                background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
            }

            .done-fill {
                background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            }

            .blocked-fill {
                background: linear-gradient(90deg, #ef4444 0%, #f87171 100%);
            }

            .priority-chart {
                width: 100%;
            }

            .priority-list {
                display: flex;
                flex-direction: column;
                gap: 16px;
            }

            .priority-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 16px;
                background: #2a2a2c;
                border-radius: 12px;
                transition: all 0.2s;
            }

            .priority-item:hover {
                background: #3a3a3c;
                transform: translateX(4px);
            }

            .priority-badge {
                font-size: 15px;
                font-weight: 500;
                color: #e6e6e6;
            }

            .priority-badge.urgent {
                color: #c1c1c1;
            }

            .priority-badge.high {
                color: #c1c1c1;
            }

            .priority-badge.medium {
                color: #c1c1c1;
            }

            .priority-badge.low {
                color: #c1c1c1;
            }

            .priority-count {
                font-size: 24px;
                font-weight: 700;
                color: #e6e6e6;
            }

            .recent-activity {
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 16px;
                padding: 24px;
            }

            .activity-title {
                font-size: 20px;
                font-weight: 600;
                color: #e6e6e6;
                margin: 0 0 24px 0;
            }

            .activity-list {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .activity-item {
                display: flex;
                gap: 16px;
                padding: 16px;
                background: #2a2a2c;
                border-radius: 12px;
                transition: all 0.2s;
            }

            .activity-item:hover {
                background: #3a3a3c;
                transform: translateX(4px);
            }

            .activity-icon {
                width: 40px;
                height: 40px;
                background: #3b82f6;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                flex-shrink: 0;
            }

            .activity-content {
                flex: 1;
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .activity-text {
                font-size: 15px;
                color: #e6e6e6;
                margin: 0;
            }

            .activity-time {
                font-size: 13px;
                color: #7a7a7a;
            }

            .context-menu {
            position: absolute;
            background: #1e1e1e;
            border: 1px solid #333;
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
            border-radius: 8px;
            padding: 8px 0;
            z-index: 10000;
            min-width: 220px;
            color: #eee;
            font-family: sans-serif;
            }

            .menu-item {
            padding: 10px 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            transition: background 0.2s;
            position: relative;
            cursor: url("hand_cursor321.png"), auto;
            }

            .menu-item:hover {
            background-color: #2d2d2d;
            }

            .menu-item .menu-icon {
            width: 16px;
            height: 16px;
            opacity: 0.7;
            display: flex;
            align-items: center;
            justify-content: center;
            }

            .menu-item .menu-text {
            flex-grow: 1;
            }

            .menu-item .arrow-icon {
            font-size: 10px;
            opacity: 0.5;
            }

            .menu-item.delete-item {
            color: #ff5f5f;
            border-top: 1px solid #333;
            margin-top: 5px;
            padding-top: 12px;
            }

            .menu-item.delete-item:hover {
            background-color: #351a1a;
            }

            .rename-input {
            background: #2a2a2a;
            border: 1px solid #444;
            color: #fff;
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 14px;
            width: 80%;
            outline: none;
            }


            .calendar-view {
                flex: 1;
                display: flex;
                gap: 24px;
                padding: 24px;
                overflow-y: auto;
            }

            .calendar-container {
                flex: 2;
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 16px;
                padding: 24px;
                height: fit-content;
            }

            .calendar-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 24px;
            }

            .calendar-title {
                font-size: 24px;
                font-weight: 600;
                color: #e6e6e6;
                margin: 0;
            }

            .calendar-nav-btn {
                background: #2a2a2c;
                border: none;
                color: #e6e6e6;
                width: 36px;
                height: 36px;
                border-radius: 8px;
                font-size: 18px;
                transition: all 0.2s;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .calendar-nav-btn:hover {
                background: #3a3a3c;
                transform: scale(1.05);
            }

            .calendar-weekdays {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 8px;
                margin-bottom: 12px;
            }

            .weekday {
                text-align: center;
                font-size: 13px;
                font-weight: 600;
                color: #9a9a9a;
                padding: 12px 0;
            }

            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 8px;
            }

            .calendar-day {
                aspect-ratio: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 12px;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s;
                position: relative;
                color: #e6e6e6;
                background: #0f0f10;
                cursor: url("hand_cursor321.png"), auto;
            }

            .calendar-day:hover {
                background: #2a2a2c;
                transform: scale(1.05);
            }

            .calendar-day.prev-month,
            .calendar-day.next-month {
                color: #5a5a5a;
            }

            .calendar-day.today {
                background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
                color: white;
                font-weight: 600;
            }

            .calendar-day.selected {
                background: #6366f1;
                color: white;
                box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
            }

            .calendar-day.today.selected {
                box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5);
            }

            .task-count-badge {
                position: absolute;
                top: 4px;
                right: 4px;
                background: #ef4444;
                color: white;
                font-size: 10px;
                font-weight: 700;
                width: 16px;
                height: 16px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .selected-date-tasks {
                flex: 1;
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 16px;
                padding: 24px;
                display: flex;
                flex-direction: column;
                max-height: calc(100vh - 180px);
            }

            .tasks-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }

            .tasks-header h3 {
                font-size: 20px;
                font-weight: 600;
                color: #e6e6e6;
                margin: 0;
            }

            .add-task-for-date-btn {
                background: #6366f1;
                border: none;
                color: white;
                padding: 10px 16px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 6px;
                transition: all 0.2s;
            }

            .add-task-for-date-btn:hover {
                background: #7c3aed;
                transform: translateY(-2px);
            }

            .date-tasks-list {
                flex: 1;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .empty-state {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 40px 20px;
                text-align: center;
                color: #9a9a9a;
            }

            .empty-icon {
                font-size: 64px;
                margin-bottom: 16px;
                opacity: 0.5;
            }

            .empty-state p {
                font-size: 15px;
                margin: 0;
            }

            .date-task-card {
                background: #2a2a2c;
                border: 1px solid #3a3a3c;
                border-radius: 12px;
                padding: 16px;
                transition: all 0.2s;
            }

            .date-task-card:hover {
                background: #3a3a3c;
                transform: translateX(4px);
            }

            .task-card-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 8px;
            }

            .task-card-status {
                display: flex;
                align-items: center;
                gap: 8px;
                flex: 1;
            }

            .task-card-title {
                font-size: 15px;
                font-weight: 600;
                color: #e6e6e6;
            }

            .task-delete-btn {
                background: transparent;
                border: none;
                color: #9a9a9a;
                font-size: 18px;
                padding: 0;
                width: 24px;
                height: 24px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                transition: all 0.2s;
            }

            .task-delete-btn:hover {
                background: #ef4444;
                color: white;
            }

            .task-card-description {
                font-size: 14px;
                color: #b5b5b5;
                margin: 0 0 12px 0;
                line-height: 1.5;
            }

            .task-card-footer {
                display: flex;
                gap: 8px;
                align-items: center;
            }

            .priority-badge-small {
                font-size: 11px;
                font-weight: 600;
                padding: 3px 8px;
                border-radius: 4px;
                text-transform: uppercase;
            }

            .priority-badge-small.urgent {
                background: rgba(239, 68, 68, 0.2);
                color: #ef4444;
            }

            .priority-badge-small.high {
                background: rgba(249, 115, 22, 0.2);
                color: #f97316;
            }

            .priority-badge-small.normal {
                background: rgba(59, 130, 246, 0.2);
                color: #3b82f6;
            }

            .priority-badge-small.low {
                background: rgba(156, 163, 175, 0.2);
                color: #9ca3af;
            }

            .modal-overlay-date-task {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(4px);
            }

            .date-display {
                display: flex;
                align-items: center;
                gap: 12px;
                background: #f3f4f6;
                padding: 12px 16px;
                border-radius: 10px;
                margin-bottom: 20px;
            }

            .date-icon {
                font-size: 24px;
            }

            .date-display span:last-child {
                font-size: 15px;
                font-weight: 600;
                color: #374151;
            }

            .task-description {
                resize: vertical;
                min-height: 80px;
                font-family: inherit;
            }

            .task-options {
                margin-bottom: 20px;
            }

            .option-label {
                display: block;
                font-size: 13px;
                font-weight: 600;
                color: #6b7280;
                margin-bottom: 10px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .priority-select {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .priority-option {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 10px 14px;
                background: #f9fafb;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s;
                color: #374151;
            }

            .priority-option:hover {
                background: #f3f4f6;
                border-color: #d1d5db;
            }

            .priority-option.active {
                background: #eff6ff;
                border-color: #3b82f6;
                color: #1e40af;
            }

            .priority-option img {
                width: 20px;
                height: 20px;
            }

            .task-date-input {
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 6px;
                color: #e6e6e6;
                padding: 4px 8px;
                font-size: 12px;
                height: 26px;
                outline: none;
            }

            .task-date-input::-webkit-calendar-picker-indicator {
                filter: invert(1);
            }

            .task-date-input:focus {
                border-color: #6366f1;
            }

            @media (max-width: 1024px) {
                .calendar-view {
                    flex-direction: column;
                }
                
                .calendar-container,
                .selected-date-tasks {
                    flex: 1;
                    max-height: none;
                }
            }

            .modal-overlay-profile {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            }

            .profile-modal {
                max-width: 500px;
                width: 90%;
            }

            .dark-modal {
                background: #1a1a1c !important;
                border: 1px solid #2a2a2c;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            }

            .dark-close {
                color: #e6e6e6;
                font-size: 24px;
                transition: color 0.2s;
            }

            .dark-close:hover {
                color: #fff;
            }

            .dark-title {
                color: #e6e6e6 !important;
            }

            .profile-header {
                display: flex;
                align-items: center;
                gap: 20px;
                margin-bottom: 30px;
                padding-bottom: 20px;
                border-bottom: 1px solid #2a2a2c;
            }

            .profile-avatar-large {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 36px;
                font-weight: 700;
                color: white;
                flex-shrink: 0;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            }

            .profile-letter {
                text-transform: uppercase;
            }

            .profile-info {
                flex: 1;
            }

            .profile-name {
                font-size: 24px;
                font-weight: 700;
                color: #e6e6e6;
                margin: 0 0 4px 0;
            }

            .profile-email {
                font-size: 14px;
                color: #9a9a9a;
                margin: 0;
            }

            .profile-stats {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
                margin-bottom: 30px;
            }

            .profile-stat {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 20px 16px;
                border-radius: 12px;
                text-align: center;
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.05);
                transition: transform 0.2s;
            }

            .profile-stat:hover {
                transform: translateY(-4px);
            }

            .profile-stat:nth-child(2) {
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            }

            .profile-stat:nth-child(3) {
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            }

            .profile-stat-value {
                font-size: 32px;
                font-weight: 700;
                margin-bottom: 6px;
            }

            .profile-stat-label {
                font-size: 11px;
                opacity: 0.95;
                font-weight: 500;
            }

            .profile-section {
                margin-bottom: 20px;
            }

            .profile-label {
                display: block;
                font-size: 12px;
                font-weight: 600;
                color: #9a9a9a;
                margin-bottom: 10px;
                text-transform: uppercase;
                letter-spacing: 0.8px;
            }

            .profile-readonly {
                background: #2a2a2c;
                padding: 12px 16px;
                border-radius: 10px;
                color: #b5b5b5;
                font-size: 14px;
                border: 1px solid #3a3a3c;
            }

            .language-dropdown {
                position: relative;
                width: 100%;
            }

            .language-dropdown-btn {
                width: 100%;
                background: #2a2a2c;
                border: 1px solid #3a3a3c;
                padding: 14px 16px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                gap: 12px;
                transition: all 0.3s ease;
                cursor: url('cursor321.png'), pointer;
                color: #e6e6e6;
                font-size: 15px;
            }

            .language-dropdown-btn:hover {
                background: #3a3a3c;
                border-color: #667eea;
            }

            .language-dropdown-btn.open {
                border-color: #667eea;
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }

            .selected-lang-flag {
                font-size: 24px;
            }

            .selected-lang-name {
                flex: 1;
                text-align: left;
                font-weight: 500;
            }

            .dropdown-arrow {
                font-size: 12px;
                transition: transform 0.3s ease;
                color: #9a9a9a;
            }

            .language-dropdown-btn.open .dropdown-arrow {
                transform: rotate(180deg);
            }

            .language-dropdown-menu {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: #2a2a2c;
                border: 1px solid #667eea;
                border-top: none;
                border-bottom-left-radius: 10px;
                border-bottom-right-radius: 10px;
                max-height: 0;
                overflow: hidden;
                opacity: 0;
                transition: all 0.3s ease;
                z-index: 1000;
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            }

            .language-dropdown-menu.open {
                max-height: 200px;
                opacity: 1;
            }

            .language-option {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 14px 16px;
                cursor: url('cursor321.png'), pointer;
                transition: background 0.2s ease;
                color: #e6e6e6;
                font-size: 15px;
            }

            .language-option:hover {
                background: #3a3a3c;
            }

            .language-option:last-child {
                border-bottom-left-radius: 10px;
                border-bottom-right-radius: 10px;
            }

            .language-option .lang-flag {
                font-size: 24px;
            }

            .language-option .lang-name {
                flex: 1;
                font-weight: 500;
            }

            .dark-input {
                background: #2a2a2c !important;
                border: 1px solid #3a3a3c !important;
                color: #e6e6e6 !important;
            }

            .dark-input:focus {
                border-color: #667eea !important;
                outline: none;
            }

            .profile-actions {
                display: flex;
                gap: 12px;
                margin-top: 30px;
            }

            .profile-btn {
                flex: 1;
                background: #2a2a2c;
                color: #e6e6e6;
                border: 1px solid #3a3a3c;
                padding: 14px 20px;
                font-size: 16px;
                font-weight: 600;
                border-radius: 12px;
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 8px;
                transition: all 0.3s ease;
            }

            .profile-btn .arrow {
                opacity: 0;
                transform: translateX(-6px);
                transition: 0.3s ease;
            }

            .profile-btn:hover {
                background: #3a3a3c;
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }

            .profile-btn:hover .arrow {
                opacity: 1;
                transform: translateX(0);
            }

            .profile-btn:hover .txt {
                transform: translateX(6px);
                transition: 0.3s ease;
            }

            .profile-btn.save-btn {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border: none;
            }

            .profile-btn.save-btn:hover {
                box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);
                transform: translateY(-3px);
            }


            .ai-assistant {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: #0f0f10;
                overflow: hidden;
            }

            .ai-header {
                padding: 32px 40px;
                border-bottom: 1px solid #1e1e1f;
            }

            .ai-title {
                display: flex;
                align-items: center;
                gap: 12px;
                margin-bottom: 8px;
            }

            .ai-icon {
                font-size: 32px;
                background: radial-gradient(circle at center, #6ee7ff, #6366f1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .ai-title h2 {
                font-size: 28px;
                font-weight: 700;
                color: #e6e6e6;
                margin: 0;
            }

            .ai-subtitle {
                font-size: 15px;
                color: #9a9a9a;
                margin: 0;
            }

            .ai-chat {
                flex: 1;
                overflow-y: auto;
                padding: 24px;
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .ai-message {
                display: flex;
                gap: 12px;
                animation: slideInMessage 0.3s ease-out;
            }

            @keyframes slideInMessage {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .ai-message-user {
                flex-direction: row-reverse;
            }

            .ai-avatar {
                width: 36px;
                height: 36px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                flex-shrink: 0;
                background: #1a1a1c;
            }

            .ai-message-user .ai-avatar {
                background: radial-gradient(circle at center, #6ee7ff, #6366f1);
            }

            .ai-bubble {
                max-width: 70%;
                padding: 16px 20px;
                border-radius: 16px;
                background: #1a1a1c;
                color: #e6e6e6;
                font-size: 15px;
                line-height: 1.6;
            }

            .ai-message-user .ai-bubble {
                background: #6366f1;
                color: white;
            }

            .ai-bubble p {
                margin: 0 0 12px 0;
            }

            .ai-bubble p:last-child {
                margin-bottom: 0;
            }

            .ai-bubble ul {
                margin: 12px 0;
                padding-left: 20px;
            }

            .ai-bubble li {
                margin: 8px 0;
            }

            .ai-bubble strong {
                color: #6ee7ff;
            }

            .ai-input-container {
                padding: 24px;
                border-top: 1px solid #1e1e1f;
                display: flex;
                gap: 12px;
            }

            .ai-input {
                flex: 1;
                background: #1a1a1c;
                border: 1px solid #2a2a2c;
                border-radius: 12px;
                padding: 14px 18px;
                font-size: 15px;
                color: #e6e6e6;
                outline: none;
                transition: border-color 0.2s;
            }

            .ai-input:focus {
                border-color: #6366f1;
            }

            .ai-input::placeholder {
                color: #5a5a5a;
            }

            .ai-send-btn {
                width: 48px;
                height: 48px;
                background: #6366f1;
                border: none;
                border-radius: 12px;
                color: white;
                font-size: 20px;
                transition: all 0.2s;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: url("hand_cursor321.png"), auto;
            }

            .ai-send-btn:hover {
                background: #7c3aed;
                transform: scale(1.05);
            }

            .ai-send-btn:active {
                transform: scale(0.95);
            }

            .quick-date-picker {
                position: absolute;
                background-color: #1a1a1a;
                border: 1px solid #333333;
                border-radius: 8px;
                box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
                padding: 16px;
                z-index: 11000;
                width: 260px;
                font-family: 'Inter', -apple-system, sans-serif;
                user-select: none;
            }

            .quick-calendar-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 12px;
            }

            #quickMonthTitle {
                color: #ffffff;
                font-size: 14px;
                font-weight: 600;
            }

            .quick-calendar-header button {
                background: transparent;
                border: none;
                color: #ffffff;
                font-size: 16px;
                padding: 2px 8px;
                border-radius: 4px;
                transition: background 0.2s;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .quick-calendar-header button:hover {
                background: #333333;
            }

            .quick-calendar-grid-header {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                text-align: center;
                margin-bottom: 4px;
                padding: 0 2px; 
            }

            .quick-calendar-grid-header span {
                color: #7c7c7c;
                font-size: 10px;
                font-weight: 600;
                text-transform: uppercase;
            }

            #quickCalendarGrid {
                display: grid !important;
                grid-template-columns: repeat(7, 1fr) !important;
                gap: 2px;
                min-height: 150px;
                cursor: url("hand_cursor321.png"), auto;
            }

            .quick-day {
                color: #ffffff;
                aspect-ratio: 1 / 1;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 12px;
                border-radius: 4px;
                transition: all 0.15s ease;
                position: relative;
                z-index: 1;
            }

            .quick-day:hover:not(.other-month) {
                background-color: #333333;
            }

            .quick-day.other-month {
                color: #555555 !important;
                cursor: default;
            }

            .quick-day.today {
                color: #ffffff !important;
                font-weight: 700;
            }

            .quick-day.today::before {
                content: '';
                position: absolute;
                width: 24px;
                height: 24px;
                background-color: #ff4d4d;
                border-radius: 50%;
                z-index: -1;
            }

            .quick-day.selected {
                background-color: #4f46e5 !important;
                color: #ffffff !important;
                font-weight: 600;
                border-radius: 6px !important;
            }

            .quick-day.selected.today::before {
                display: none; 
            }

            .date-text {
                background: rgba(79, 70, 229, 0.15);
                color: #a5b4fc;
                padding: 3px 10px;
                border-radius: 6px;
                font-size: 12px;
                font-weight: 500;
                border: 1px solid rgba(79, 70, 229, 0.3);
                white-space: nowrap;
            }

            .quick-calendar-footer {
                margin-top: 12px;
                padding-top: 8px;
                border-top: 1px solid #333333;
                display: flex;
                justify-content: center;
            }

            .clear-date-btn {
                background: transparent;
                border: none;
                color: #ff4d4d;
                font-size: 12px;
                font-weight: 500;
                cursor: pointer;
                padding: 6px 12px;
                border-radius: 4px;
                transition: background 0.2s;
                display: flex;
                align-items: center;
                gap: 6px;
                width: 100%;
                justify-content: center;
            }

            .clear-date-btn:hover {
                background: rgba(255, 77, 77, 0.1);
            }

            .clear-date-btn .icon {
                font-size: 10px;
            }

        </style>

        <!-- Custom Notifications -->
        <div id="notificationContainer"></div>

        <div class="modal-overlay-log">
                <div class="modal">
                    <span class="close-btn"></span>
                <h2>  </h2>
                    <a class="google-btn" href="">
                    <img src="https://www.gstatic.com/images/branding/product/1x/gsa_64dp.png" width="20" id="continueGoogle">
                      Google
                    </a>
                <div class="divider" id="ort-log"></div>

                <input type="email" class="email-input" id="loginEmail" placeholder=" ">
                <input type="password" class="email-input" id="loginPassword" placeholder="">

                <button class="email-btn" id="loginButton">
                    <span class="arrow"></span>
                    <span class="txt"></span>
                    </button>
                <p class="dop-links"><a href="" id="resetPasswordLink"> ?</a></p>
                <p class="dop-links">
                    <span class="pre-link-text-log"> ? </span>
                    <a href="" id="switchToRegister"> </a>
                </p>
                </div>
            </div>

            <div class="modal-overlay-start">
                <div class="modal">
                    <span class="close-btn"></span>
                <h2> </h2>
                    <a class="google-btn" href="">
                    <img src="https://www.gstatic.com/images/branding/product/1x/gsa_64dp.png" width="20" id="continueGoogle">
                      Google
                    </a>
                <div class="divider" id="ort-reg"></div>

                <input type="email" class="email-input" id="regEmail" placeholder=" ">
                <input type="password" class="email-input" id="regPassword" placeholder="">
                <input type="password" class="email-input" id="regConfirmPassword" placeholder=" ">

                <button class="email-btn" id="registerButton">
                    <span class="arrow"></span>
                <span class="txt"></span>
                    </button>
                <p class="dop-links">
                    <span class="pre-link-text-start">  ? </span>
                    <a href="" id="switchToLogin"></a>
                </p>
                </div>
            </div>

            <div class="reset-password">
                <div class="modal">
                    <span class="close-btn"></span>
                <h2> </h2>

                <input type="email" class="email-input" id="resetEmail" placeholder=" ">

                <button class="email-btn" id="resetPasswordButton">
                    <span class="arrow"></span>
                <span class="txt" id="resetPas"> </span>
                    </button>
                <p class="dop-links">
                    <a href="" id="cancelReset"></a>
                </p>
                </div>
            </div>

            <div class="modal-overlay-date-task" id="modalDateTask">
                <div class="modal">
                    <span class="close-btn" id="closeDateTaskModal"></span>
                    <h2 id="dateTaskModalTitle"> </h2>
                    
                    <div class="date-display" id="dateTaskDisplay">
                        <span class="date-icon"></span>
                        <span id="selectedDateDisplay">  </span>
                    </div>

                    <input type="text" class="email-input" id="taskTitleInput" placeholder=" ">
                    <textarea class="email-input task-description" id="taskDescriptionInput" placeholder=" (')" rows="3"></textarea>

                    <div class="task-options">
                        <label class="option-label">:</label>
                        <div class="priority-select">
                            <button class="priority-option" data-priority="none">
                                <img src="priority_icon.png">  
                            </button>
                            <button class="priority-option" data-priority="urgent">
                                <img src="urgent_icon.png"> 
                            </button>
                            <button class="priority-option" data-priority="high">
                                <img src="high_icon.png"> 
                            </button>
                            <button class="priority-option" data-priority="normal">
                                <img src="normal_icon.png"> 
                            </button>
                            <button class="priority-option" data-priority="low">
                                <img src="low_icon.png"> 
                            </button>
                        </div>
                    </div>

                    <button class="email-btn" id="saveDateTaskBtn">
                        <span class="arrow"></span>
                        <span class="txt"></span>
                    </button>
                </div>
            </div>

            <div class="modal-overlay-profile" id="modalProfile">
                <div class="modal profile-modal dark-modal">
                    <span class="close-btn dark-close" id="closeProfileModal"></span>
                    <h2 class="dark-title"> </h2>
                    
                    <div class="profile-header">
                        <div class="profile-avatar-large" id="profileAvatarLarge">
                            <span class="profile-letter" id="profileLetter"></span>
                        </div>
                        <div class="profile-info">
                            <h3 class="profile-name" id="profileName">Username</h3>
                            <p class="profile-email" id="profileEmail">email@example.com</p>
                        </div>
                    </div>

                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileTotalTasks">0</div>
                            <div class="profile-stat-label"> </div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileCompletedTasks">0</div>
                            <div class="profile-stat-label"></div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileProductivity">0%</div>
                            <div class="profile-stat-label"></div>
                        </div>
                    </div>

                    <div class="profile-section">
                        <label class="profile-label">' </label>
                        <input type="text" class="email-input dark-input" id="profileNameInput" placeholder=" '">
                    </div>

                    <div class="profile-section">
                        <label class="profile-label"> </label>
                        <div class="profile-readonly" id="profileRegistered"></div>
                    </div>

                    <div class="profile-section">
                        <label class="profile-label"> </label>
                        <div class="language-dropdown">
                            <button class="language-dropdown-btn" id="languageDropdownBtn">
                                <span class="selected-lang-flag" id="selectedLangFlag"></span>
                                <span class="selected-lang-name" id="selectedLangName"></span>
                                <span class="dropdown-arrow"></span>
                            </button>
                            <div class="language-dropdown-menu" id="languageDropdownMenu">
                                <div class="language-option" data-lang="uk">
                                    <span class="lang-flag"></span>
                                    <span class="lang-name"></span>
                                </div>
                                <div class="language-option" data-lang="en">
                                    <span class="lang-flag"></span>
                                    <span class="lang-name">English</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="profile-actions">
                        <button class="profile-btn save-btn" id="saveProfileBtn">
                            <span class="arrow"></span>
                            <span class="txt"> </span>
                        </button>
                    </div>
                </div>
            </div>


        <div id="landingPage" class="homepage">
            <div class="home-header">
                <div class="left">
                    <a class="logo" href="#">
                        <img src="main_logo.png" alt="logo">
                    </a>
                    <nav>
                        <a href="#" id="products">Products</a>
                        <a href="#" id="solutions">Solutions</a>
                        <a href="#" id="community">Community</a>
                        <a href="#" id="resources">Resources</a>
                        <a href="#" id="about">About</a>
                    </nav>
                </div>
                <div class="right">
                    <div class="auth-buttons" id="authButtons">
                        <a class="login">Log in</a>
                        <button class="btn-start">
                            <span class="arrow"></span>
                            <span class="text">Get started for free</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">Turn your ideas into reality</h1>
                    <p class="hero-subtitle">The planner helps you organize your work, manage projects, and collaborate with your team.</p>
                    <button class="hero-btn">
                        <span class="arrow"></span>
                        <span class="text">Get started for free</span>
                    </button>
            </div>

                <div class="decorative-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                    <div class="shape shape-4"></div>
                    <div class="shape shape-5"></div>
                    <div class="shape shape-6"></div>
                    <div class="shape shape-7"></div>
                    <div class="shape shape-8"></div>
                </div>
            </div>

        <footer class="footer">
            <div class="footer-inner">
                <div class="footer-left">

                    <h2 class="footer-title">
                        Start simple.<br>Write your first task.
                    </h2>

                    <button class="footer-btn">
                        <span class="arrow"></span>
                        <span class="text">Explore all templates</span>
                    </button>

                    <div class="social-icons">
                        <a href="#" class="social-btn"><img src="x_logo.avif"></a>
                        <a href="#" class="social-btn"><img src="y_logo.png"></a>
                        <a href="#" class="social-btn"><img src="i_logo.png"></a>
                        <a href="#" class="social-btn"><img src="f_logo.png"></a>
                    </div>

                    <div class="language-selector">
                        <button class="lang-btn">
                             English <span class="arrow"></span>
                        </button>

                        <ul class="lang-dropdown">
                                <li data-lang="en">English</li>
                                <li data-lang="ua"></li>
                                <li data-lang="ru"></li>
                        </ul>
                    </div>

                </div>

                <div class="footer-columns">
                    <div class="footer-col">
                        <h4>PRODUCT</h4>
                        <a href="#">Design</a>
                        <a href="#">Dev Mode</a>
                        <a href="#">Slides</a>
                    </div>

                    <div class="footer-col">
                        <h4>USE CASES</h4>
                        <a href="#">Wireframing</a>
                        <a href="#">Prototyping</a>
                        <a href="#">Brainstorming</a>
                    </div>

                    <div class="footer-col">
                        <h4>RESOURCES</h4>
                        <a href="#">Blog</a>
                        <a href="#">Templates</a>
                        <a href="#">Developers</a>
                        <a href="#">Help center</a>
                    </div>

                    <div class="footer-col">
                        <h4>COMPANY</h4>
                        <a href="#">Events</a>
                        <a href="#">Careers</a>
                        <a href="#">Status</a>
                        <a href="#">Legal & privacy</a>
                    </div>
                </div>

            </div>
        </footer>
        </div>

        <div id="dashboardPage" class="schedule-main">
            <div class="sidebar">

                <div class="sidebar-top">
                    <div class="sidebar-item active">
                        <div class="icon glow"></div>
                        <span>Home</span>
                    </div>

                    <div class="sidebar-item">
                        <div class="icon"></div>
                        <span>Planner</span>
                    </div>

                    <div class="sidebar-item">
                        <div class="icon badge">
                            
                            <span class="dot"></span>
                        </div>
                        <span>AI</span>
                    </div>

                    <div class="sidebar-item">
                        <div class="icon"></div>
                        <span>Teams</span>
                    </div>

                    <div class="sidebar-item">
                        <div class="icon"></div>
                        <span>More</span>
                    </div>

                </div>

                <div class="sidebar-bottom">

                    <div class="sidebar-item">
                        <div class="icon"></div>
                        <span>Invite</span>
                    </div>

                    <div class="sidebar-item upgrade">
                        <div class="icon"></div>
                        <span>Upgrade</span>
                    </div>

                </div>

            </div>

            <div class="main-window">

                <div class="topbar">
                    <div class="breadcrumbs">
                        Home
                    </div>
                    
                    <div class="user-info" id="userInfo" style="display: none;">
                        <div class="user-trigger" id="userTrigger">
                            <div class="user-avatar" id="userAvatar">
                                <span class="avatar-letter" id="avatarLetter"></span>
                                <span class="avatar-status"></span>
                            </div>
                            <span class="avatar-arrow" id="avatarArrow">^</span>
                        </div>

                        <div class="user-menu" id="userMenu">
                            <div class="menu-section">
                                <button class="menu-item" id="openProfileBtn">
                                    <span class="menu-icon"><img src="settings_icon.png" alt=""></span>
                                    <span class="menu-text">Settings</span>
                                </button>
                            </div>

                            <div class="menu-divider"></div>

                            <div class="menu-section">
                                <button class="menu-item logout-item" id="logoutBtn">
                                    <span class="menu-icon"><img src="logout_icon.png" alt=""></span>
                                    <span class="menu-text">Log out</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="view-tabs">
                    <div class="view-tab active"><img src="list_icon.png"> List</div>
                    <div class="view-tab"><img src="calendar_icon.png"> Calendar</div>
                    <div class="view-tab"><img src="dashboard_icon.png"> Dashboard</div>
                </div>

                <div class="table-wrapper" id="listView">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th></th>
                                <th>Due date</th>
                                <th>Priority</th>
                                <th>Status</th>
                                <th>Comments</th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>

                            <tr class="group-row" data-status="DONE">
                                <td colspan="7">
                                <span class="group-badge">
                                    <span class="group-dot dot-done"></span>
                                    DONE
                                </span>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                <div class="name-cell">
                                    <span class="task-status-dot dot-done type-task"></span>
                                    Task 1
                                </div>
                                </td>
                                <td class="icon-cell"><img src="date_icon.png"></td>
                                <td class="icon-cell priority-btn" data-priority="none">
                                    <img src="priority_icon.png">
                                    <span class="priority-label"></span>
                                </td>
                                <td><span class="status done">DONE</span></td>
                                <td class="icon-cell"><img src="comment_icon.png"></td>
                                <td></td>
                            </tr>

                            <tr class="add-task-row" data-status="DONE">
                                <td>
                                    <button class="add-task-btn">+ Add task</button>
                                </td>
                                <td class="icon-cell"></td>
                                <td class="icon-cell"></td>
                                <td></td>
                                <td class="icon-cell"></td>
                                <td></td>
                            </tr>

                            <tr class="group-row" data-status="IN PROGRESS">
                                <td colspan="7">
                                <span class="group-badge">
                                    <span class="group-dot dot-progress"></span>
                                    IN PROGRESS
                                </span>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                <div class="name-cell">
                                    <span class="task-status-dot dot-progress type-task"></span>
                                    Task 2
                                </div>
                                </td>
                                <td class="icon-cell"><img src="date_icon.png"></td>
                                <td class="icon-cell priority-btn" data-priority="none">
                                    <img src="priority_icon.png">
                                    <span class="priority-label"></span>
                                </td>
                                <td><span class="status progress">IN PROGRESS</span></td>
                                <td class="icon-cell"><img src="comment_icon.png"></td>
                                <td></td>
                            </tr>

                            <tr class="add-task-row" data-status="IN PROGRESS">
                                <td>
                                    <button class="add-task-btn">+ Add task</button>
                                </td>
                                <td class="icon-cell"></td>
                                <td class="icon-cell"></td>
                                <td></td>
                                <td class="icon-cell"></td>
                                <td></td>
                            </tr>

                            <tr class="group-row" data-status="TO DO">
                                <td colspan="7">
                                <span class="group-badge">
                                    <span class="group-dot dot-todo"></span>
                                    TO DO
                                </span>
                                </td>
                            </tr>

                            <tr class="task-row">
                                <td>
                                <div class="name-cell">
                                    <span class="task-status-dot dot-todo type-task"></span>
                                    Task 3
                                </div>
                                </td>
                                <td class="icon-cell"><img src="date_icon.png"></td>
                                <td class="icon-cell priority-btn" data-priority="none">
                                    <img src="priority_icon.png">
                                    <span class="priority-label"></span>
                                </td>
                                <td><span class="status todo">TO DO</span></td>
                                <td class="icon-cell"><img src="comment_icon.png"></td>
                                <td></td>
                            </tr>

                            <tr class="add-task-row" data-status="TO DO">
                                <td>
                                    <button class="add-task-btn">+ Add task</button>
                                </td>
                                <td class="icon-cell"></td>
                                <td class="icon-cell"></td>
                                <td></td>
                                <td class="icon-cell"></td>
                                <td></td>
                            </tr>

                            </tbody>
                    </table>
                </div>

                <div class="calendar-view" id="calendarView" style="display: none;">
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <button class="calendar-nav-btn" id="prevMonth"></button>
                            <h2 class="calendar-title" id="calendarTitle">January 2026</h2>
                            <button class="calendar-nav-btn" id="nextMonth"></button>
                        </div>
                        
                        <div class="calendar-weekdays">
                            <div class="weekday"></div>
                            <div class="weekday"></div>
                            <div class="weekday"></div>
                            <div class="weekday"></div>
                            <div class="weekday"></div>
                            <div class="weekday"></div>
                            <div class="weekday"></div>
                        </div>
                        
                        <div class="calendar-grid" id="calendarGrid">
                        </div>
                    </div>
                    
                    <div class="selected-date-tasks" id="selectedDateTasks">
                        <div class="tasks-header">
                            <h3 id="selectedDateTitle"> </h3>
                            <button class="add-task-for-date-btn" id="addTaskForDateBtn" style="display: none;">
                                +  
                            </button>
                        </div>
                        <div class="date-tasks-list" id="dateTasksList">
                            <div class="empty-state">
                                <div class="empty-icon"></div>
                                <p> ,    </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-view" id="boardView" style="display: none;">
                    <div class="dashboard-container">
                        <div class="dashboard-header">
                            <h1> </h1>
                            <p class="dashboard-subtitle">    </p>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-value" id="totalTasks">0</h3>
                                    <p class="stat-label"> </p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                    
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-value" id="inProgressTasks">0</h3>
                                    <p class="stat-label"> </p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                    
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-value" id="completedTasks">0</h3>
                                    <p class="stat-label"></p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                    
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-value" id="productivity">0%</h3>
                                    <p class="stat-label"></p>
                                </div>
                            </div>
                        </div>

                        <div class="charts-row">
                            <div class="chart-card">
                                <h3 class="chart-title"> </h3>
                                <div class="progress-chart">
                                    <div class="progress-bar-container">
                                        <div class="progress-item">
                                            <div class="progress-label">
                                                <span></span>
                                                <span id="todoCount">0</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-fill todo-fill" id="todoBar" style="width: 0%"></div>
                                            </div>
                                        </div>
                                        <div class="progress-item">
                                            <div class="progress-label">
                                                <span> </span>
                                                <span id="progressCount">0</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-fill progress-fill-bar" id="progressBar" style="width: 0%"></div>
                                            </div>
                                        </div>
                                        <div class="progress-item">
                                            <div class="progress-label">
                                                <span></span>
                                                <span id="doneCount">0</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-fill done-fill" id="doneBar" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="chart-card">
                                <h3 class="chart-title"></h3>
                                <div class="priority-chart">
                                    <div class="priority-list">
                                        <div class="priority-item">
                                            <div class="priority-badge urgent"> </div>
                                            <div class="priority-count" id="urgentCount">0</div>
                                        </div>
                                        <div class="priority-item">
                                            <div class="priority-badge high"> </div>
                                            <div class="priority-count" id="highCount">0</div>
                                        </div>
                                        <div class="priority-item">
                                            <div class="priority-badge medium"> </div>
                                            <div class="priority-count" id="mediumCount">0</div>
                                        </div>
                                        <div class="priority-item">
                                            <div class="priority-badge low"> </div>
                                            <div class="priority-count" id="lowCount">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="recent-activity">
                            <h3 class="activity-title"> </h3>
                            <div class="activity-list" id="recentTasks">
                                <div class="activity-item">
                                    <div class="activity-icon"></div>
                                    <div class="activity-content">
                                        <p class="activity-text">  .    !</p>
                                        <span class="activity-time"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="ai-assistant" id="aiAssistant" style="display: none;">
                <div class="ai-header">
                    <div class="ai-title">
                        <span class="ai-icon"></span>
                        <h2>AI Task Assistant</h2>
                    </div>
                    <p class="ai-subtitle">      </p>
                </div>

                <div class="ai-chat" id="aiChat">
                    <div class="ai-message ai-message-bot">
                        <div class="ai-avatar"></div>
                        <div class="ai-bubble">
                            <p>!  AI    .    :</p>
                            <ul>
                                <li>   </li>
                                <li>    </li>
                                <li>   </li>
                                <li>    </li>
                            </ul>
                            <p> " "    !</p>
                        </div>
                    </div>
                </div>

                <div class="ai-input-container">
                    <input 
                        type="text" 
                        id="aiInput" 
                        class="ai-input" 
                        placeholder=" ..."
                    />
                    <button id="aiSendBtn" class="ai-send-btn">
                        <span></span>
                    </button>
                </div>
            </div>

        </div>

        <div id="quickDatePicker" class="quick-date-picker" style="display: none;">
            <div class="quick-calendar-header">
                <button id="quickPrevMonth"></button>
                <span id="quickMonthTitle"></span>
                <button id="quickNextMonth"></button>
            </div>
            <div class="quick-calendar-grid-header">
                <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
            </div>
            <div id="quickCalendarGrid" class="quick-calendar-grid"></div>
        </div>
    </body>

    <script>
        const i18n = {
        en: {
            login: "Log in",
            logout: "Log out",
            divider: "or",
            getStarted: "Get started for free",
            welcomeBack: name => `Hi, ${name}! Glad to see you again.`,
            loginTitle: "Sign in",
            registerTitle: "Create account",
            resetTitle: "Reset password",

            email: "EMAIL",
            password: "PASSWORD",
            confirmPassword: "CONFIRM PASSWORD",

            continueGoogle: "Continue with Google",
            forgotPassword: "Forgot password?",
            noAccount: "No account?",
            createAccount: "Create account",
            haveAccount: "Already have an account?",
            resetPassword: "Reset password",
            cancelReset: "Cancel",

            heroTitle: "Turn your ideas into reality",
            heroSubtitle:
            "The planner helps you organize your work, manage projects, and collaborate with your team.",

            footerTitle: "Start simple.\nWrite your first task.",
            exploreTemplates: "Explore all templates",

            products: "Products",
            solutions: "Solutions",
            community: "Community",
            resources: "Resources",
            about: "About",

            notifications: {
            fillAll: "Please fill in all fields",
            passwordsMismatch: "Passwords do not match",
            userExists: "User with this email already exists",
            registerSuccess: name => `Registration successful! Hi, ${name}!`,
            loginError: "Incorrect email or password",
            loginSuccess: name => `Login successful! Hi, ${name}!`,
            loggedOut: "You have logged out",
            resetSent: "Password reset email has been sent"
            },

            profile: {
            title: "My Profile",
            nameLabel: "Profile Name",
            namePlaceholder: "Enter name",
            registrationDate: "Registration Date",
            language: "Interface Language",
            saveChanges: "Save changes",
            profileUpdated: "Profile updated!",
            enterName: "Enter profile name",
            totalTasks: "Total Tasks",
            completed: "Completed",
            productivity: "Productivity",
            myProfile: "My Profile",
            ukrainian: "Ukrainian",
            english: "English"
            },

            menu: {
            myProfile: "My Profile",
            logout: "Log Out"
            },

            views: {
            list: "List",
            calendar: "Calendar",
            dashboard: "Dashboard"
            },

            table: {
            name: "Name",
            dueDate: "Due date",
            priority: "Priority",
            status: "Status",
            comments: "Comments",
            addTask: "Add task"
            },

            priorities: {
            urgent: "Urgent",
            high: "High",
            normal: "Normal",
            low: "Low",
            clear: "Clear"
            },

            statuses: {
            done: "DONE",
            inProgress: "IN PROGRESS",
            todo: "TO DO"
            },

            taskActions: {
            rename: "Rename",
            duplicate: "Duplicate",
            delete: "Delete",
            taskType: "Task Type",
            save: "Save",
            cancel: "Cancel"
            },

            dashboard: {
            title: "Dashboard Overview",
            subtitle: "Review of your projects and tasks",
            totalTasks: "Total Tasks",
            inProgress: "In Progress",
            completed: "Completed",
            productivity: "Productivity",
            progressTitle: "Task Progress",
            prioritiesTitle: "Priorities",
            recentTitle: "Recent Tasks",
            todoStatus: "TO DO",
            inProgressStatus: "IN PROGRESS",
            doneStatus: "DONE",
            noTasksYet: "No tasks yet. Create your first task!",
            now: "Now"
            },

            calendar: {
            addTask: "Add Task for Date",
            selectDate: "Select Date",
            tasksForDate: "Tasks for",
            noTasks: "No tasks for this date",
            addPlan: "Plan added!",
            enterTitle: "Enter task title",
            dateUpdated: "Date updated",
            dateRemoved: "Date removed",
            noDate: " No date",
            weekdays: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            addTaskBtn: "+ Add plan",
            modalTitle: "Add Plan",
            noDateSelected: "No date selected",
            taskNamePlaceholder: "TASK NAME",
            descriptionPlaceholder: "DESCRIPTION (optional)",
            priorityLabel: "Priority:",
            noPriority: "No priority",
            emptyStateText: "Select a date to see planned tasks",
            saveBtn: "Save"
            },

            ai: {
            greeting: " Hello! I'm your AI planning assistant.",
            howCanHelp: "How can I help you today? ",
            noTasks: "You don't have any tasks yet. Create your first task by clicking the 'Add Task' button!",
            taskAnalysis: " Task Analysis:",
            totalTasks: " Total tasks:",
            inProgress: " In progress:",
            planned: " Planned:",
            completed: " Completed:",
            recommendations: " Recommendations:",
            manyInProgress: " You have many tasks in progress",
            focusRecommendation: "I recommend focusing on 2-3 important tasks.",
            setPriorities: " Set priorities for",
            tasks: "tasks. Use the Priority column.",
            startWithImportant: " Start the day with the most important task",
            setReminders: " Set reminders for urgent tasks",
            markCompleted: " Don't forget to mark completed tasks!",
            goodQuestion: " Good question! Here's what I can do for you:",
            analyzeCommand: " 'Analyze my tasks' - show statistics",
            planDay: " 'Plan the day' - create schedule",
            howToPrioritize: " 'How to prioritize' - explain system",
            giveTips: " 'Give tips' - share productivity hacks",
            helpCommand: " 'Help' - show all commands",
            justAsk: "Just write the command in your own words! ",
            great: " Great! Just let me know if you need anything.",
            happyToHelp: " Always happy to help!",
            imHere: " Okay, I'm here if you need me.",
            gladYouLiked: " Glad you liked it!",
            iAmAssistant: " I'm an AI assistant that helps:",
            planDay2: " plan your day",
            setPriorities2: " set priorities",
            workProductively: " work more productively"
            },

            languageChanged: "Language changed to English"
        },

        ua: {
            login: "",
            logout: "",
            divider: "",
            getStarted: " ",
            welcomeBack: name => `, ${name}!    .`,
            loginTitle: "  ",
            registerTitle: " ",
            resetTitle: " ",

            email: " ",
            password: "",
            confirmPassword: " ",

            continueGoogle: "  Google",
            forgotPassword: " ?",
            noAccount: " ?",
            createAccount: " ",
            haveAccount: "  ?",
            resetPassword: " ",
            cancelReset: "",

            heroTitle: "    ",
            heroSubtitle:
            "   ,      .",

            footerTitle: "  .\n   .",
            exploreTemplates: "  ",

            products: "",
            solutions: "",
            community: "",
            resources: "",
            about: " ",

            notifications: {
            fillAll: " ,   ",
            passwordsMismatch: "  ",
            userExists: "   email  ",
            registerSuccess: name => ` ! , ${name}!`,
            loginError: " email  ",
            loginSuccess: name => ` ! , ${name}!`,
            loggedOut: "    ",
            resetSent: "       "
            },

            profile: {
            title: " ",
            nameLabel: "' ",
            namePlaceholder: " '",
            registrationDate: " ",
            language: " ",
            saveChanges: " ",
            profileUpdated: " !",
            enterName: " ' ",
            totalTasks: " ",
            completed: "",
            productivity: "",
            myProfile: " ",
            ukrainian: "",
            english: "English"
            },

            menu: {
            myProfile: " ",
            logout: ""
            },

            views: {
            list: "",
            calendar: "",
            dashboard: ""
            },

            table: {
            name: "",
            dueDate: "",
            priority: "",
            status: "",
            comments: "",
            addTask: " "
            },

            priorities: {
            urgent: "",
            high: "",
            normal: "",
            low: "",
            clear: ""
            },

            statuses: {
            done: "",
            inProgress: " ",
            todo: ""
            },

            taskActions: {
            rename: "",
            duplicate: "",
            delete: "",
            taskType: " ",
            save: "",
            cancel: ""
            },

            dashboard: {
            title: " ",
            subtitle: "    ",
            totalTasks: " ",
            inProgress: " ",
            completed: "",
            productivity: "",
            progressTitle: " ",
            prioritiesTitle: "",
            recentTitle: " ",
            todoStatus: "",
            inProgressStatus: " ",
            doneStatus: "",
            noTasksYet: "  .    !",
            now: ""
            },

            calendar: {
            addTask: "   ",
            selectDate: " ",
            tasksForDate: " ",
            noTasks: "    ",
            addPlan: " !",
            enterTitle: "  ",
            dateUpdated: " ",
            dateRemoved: " ",
            noDate: "  ",
            weekdays: ["", "", "", "", "", "", ""],
            addTaskBtn: "+  ",
            modalTitle: " ",
            noDateSelected: "  ",
            taskNamePlaceholder: " ",
            descriptionPlaceholder: " (')",
            priorityLabel: ":",
            noPriority: " ",
            emptyStateText: " ,    ",
            saveBtn: ""
            },

            ai: {
            greeting: " !   AI   .",
            howCanHelp: "   ? ",
            noTasks: "    .    ,   ' '!",
            taskAnalysis: "   :",
            totalTasks: "  :",
            inProgress: "  :",
            planned: " :",
            completed: " :",
            recommendations: " :",
            manyInProgress: "      ",
            focusRecommendation: "   2-3  .",
            setPriorities: "   ",
            tasks: ".   Priority.",
            startWithImportant: "     ",
            setReminders: "     ",
            markCompleted: "     !",
            goodQuestion: "  !       :",
            analyzeCommand: " '  ' -  ",
            planDay: " '   ' -  ",
            howToPrioritize: " '  ' -  ",
            giveTips: " ' ' -  ",
            helpCommand: " '' -   ",
            justAsk: "    ! ",
            great: " !      .",
            happyToHelp: "   !",
            imHere: " ,  ,  .",
            gladYouLiked: " ,   !",
            iAmAssistant: "  AI ,  :",
            planDay2: "  ",
            setPriorities2: "  ",
            workProductively: "  "
            },

            languageChanged: "   "
        }
        };

        i18n.uk = i18n.ua;

        function applyFullLanguage(lang) {
        const t = i18n[lang] || i18n['uk'];
        localStorage.setItem('site_lang', lang);
        
        const setTextSafe = (selector, text) => {
            const el = document.querySelector(selector);
            if (el) el.textContent = text;
        };
        
        const setPlaceholderSafe = (selector, text) => {
            const el = document.querySelector(selector);
            if (el) el.placeholder = text;
        };

        setTextSafe('.login', t.login);
        
        document.querySelectorAll('.btn-start .text, .hero-btn .text')
            .forEach(el => el.textContent = t.getStarted);

        setTextSafe('.hero-title', t.heroTitle);
        setTextSafe('.hero-subtitle', t.heroSubtitle);

        setTextSafe('.modal-overlay-log h2', t.loginTitle);
        setTextSafe('.modal-overlay-start h2', t.registerTitle);
        setTextSafe('.reset-password h2', t.resetTitle);

        setPlaceholderSafe('#loginEmail', t.email);
        setPlaceholderSafe('#loginPassword', t.password);
        setPlaceholderSafe('#regEmail', t.email);
        setPlaceholderSafe('#regPassword', t.password);
        setPlaceholderSafe('#regConfirmPassword', t.confirmPassword);
        setPlaceholderSafe('#resetEmail', t.email);

        setTextSafe('#resetPasswordLink', t.forgotPassword);
        setTextSafe('#switchToLogin', t.login);
        setTextSafe('#cancelReset', t.cancelReset);
        setTextSafe('#loginButton .txt', t.login);
        setTextSafe('#registerButton .txt', t.createAccount);
        setTextSafe('#resetPasswordButton .txt', t.resetPassword);

        const preTextLog = document.querySelector('.pre-link-text-log');
        if (preTextLog) preTextLog.textContent = t.noAccount;
        
        const preTextStart = document.querySelector('.pre-link-text-start');
        if (preTextStart) preTextStart.textContent = t.haveAccount;
        
        setTextSafe('#switchToRegister', t.createAccount);
        setTextSafe('#products', t.products);
        setTextSafe('#solutions', t.solutions);
        setTextSafe('#community', t.community);
        setTextSafe('#resources', t.resources);
        setTextSafe('#about', t.about);
        
        setTextSafe('#ort-reg', t.divider);
        setTextSafe('#ort-log', t.divider);

        document.querySelectorAll('.google-btn')
            .forEach(btn => {
            if (btn.childNodes[2]) btn.childNodes[2].nodeValue = ' ' + t.continueGoogle;
            });

        const footerTitle = document.querySelector('.footer-title');
        if (footerTitle) footerTitle.innerHTML = t.footerTitle.replace('\n', '<br>');
        
        const footerBtnText = document.querySelector('.footer-btn .text');
        if (footerBtnText) footerBtnText.textContent = t.exploreTemplates;

        setTextSafe('.dark-title', t.profile?.title || 'Profile');
        const profileLabels = document.querySelectorAll('.profile-label');
        if (profileLabels[0]) profileLabels[0].textContent = t.profile?.nameLabel || 'Profile Name';
        if (profileLabels[1]) profileLabels[1].textContent = t.profile?.registrationDate || 'Registration Date';
        if (profileLabels[2]) profileLabels[2].textContent = t.profile?.language || 'Language';
        
        setPlaceholderSafe('#profileNameInput', t.profile?.namePlaceholder || 'Enter name');
        setTextSafe('#saveProfileBtn .txt', t.profile?.saveChanges || 'Save changes');

        const statsLabels = document.querySelectorAll('.profile-stat-label');
        if (statsLabels[0]) statsLabels[0].textContent = t.profile?.totalTasks || 'Total Tasks';
        if (statsLabels[1]) statsLabels[1].textContent = t.profile?.completed || 'Completed';
        if (statsLabels[2]) statsLabels[2].textContent = t.profile?.productivity || 'Productivity';

        const openProfileBtn = document.querySelector('#openProfileBtn .menu-text');
        if (openProfileBtn) openProfileBtn.textContent = t.profile?.myProfile || 'My Profile';

        const logoutMenuItem = document.querySelector('#logoutBtn .menu-text');
        if (logoutMenuItem) logoutMenuItem.textContent = t.menu?.logout || 'Log Out';

        const languageOptions = document.querySelectorAll('.language-option');
        languageOptions.forEach(option => {
            const langName = option.querySelector('.lang-name');
            if (option.dataset.lang === 'uk' && langName) {
            langName.textContent = t.profile?.ukrainian || 'Ukrainian';
            } else if (option.dataset.lang === 'en' && langName) {
            langName.textContent = t.profile?.english || 'English';
            }
        });

        const selectedLangName = document.getElementById('selectedLangName');
        if (selectedLangName && lang === 'uk') {
            selectedLangName.textContent = t.profile?.ukrainian || 'Ukrainian';
        } else if (selectedLangName && lang === 'en') {
            selectedLangName.textContent = t.profile?.english || 'English';
        }

        const viewTabs = document.querySelectorAll('.view-tab');
        if (viewTabs[0]) {
            const listText = viewTabs[0].childNodes[1];
            if (listText) listText.nodeValue = ' ' + (t.views?.list || 'List');
        }
        if (viewTabs[1]) {
            const calText = viewTabs[1].childNodes[1];
            if (calText) calText.nodeValue = ' ' + (t.views?.calendar || 'Calendar');
        }
        if (viewTabs[2]) {
            const dashText = viewTabs[2].childNodes[1];
            if (dashText) dashText.nodeValue = ' ' + (t.views?.dashboard || 'Dashboard');
        }

        const tableHeaders = document.querySelectorAll('.table thead th');
        if (tableHeaders[0]) tableHeaders[0].textContent = t.table?.name || 'Name';
        if (tableHeaders[2]) tableHeaders[2].textContent = t.table?.dueDate || 'Due date';
        if (tableHeaders[3]) tableHeaders[3].textContent = t.table?.priority || 'Priority';
        if (tableHeaders[4]) tableHeaders[4].textContent = t.table?.status || 'Status';
        if (tableHeaders[5]) tableHeaders[5].textContent = t.table?.comments || 'Comments';

        const groupRows = document.querySelectorAll('.group-row');
        groupRows.forEach(row => {
            const status = row.dataset.status;
            const badge = row.querySelector('.group-badge');
            if (badge && status) {
            if (status === 'DONE') {
                badge.innerHTML = `<span class="group-dot dot-done"></span>${t.statuses?.done || 'DONE'}`;
            } else if (status === 'IN PROGRESS') {
                badge.innerHTML = `<span class="group-dot dot-progress"></span>${t.statuses?.inProgress || 'IN PROGRESS'}`;
            } else if (status === 'TO DO') {
                badge.innerHTML = `<span class="group-dot dot-todo"></span>${t.statuses?.todo || 'TO DO'}`;
            }
            }
        });

        document.querySelectorAll('.add-task-btn').forEach(btn => {
            btn.textContent = '+ ' + (t.table?.addTask || 'Add task');
        });

        document.querySelectorAll('.task-cancel').forEach(btn => {
            btn.textContent = t.taskActions?.cancel || 'Cancel';
        });

        document.querySelectorAll('.task-save').forEach(btn => {
            const arrow = btn.querySelector('.arrow');
            if (!arrow) {
            btn.textContent = (t.taskActions?.save || 'Save') + ' ';
            }
        });

        const weekdayElements = document.querySelectorAll('.calendar-weekdays .weekday');
        if (weekdayElements.length > 0 && t.calendar?.weekdays) {
            weekdayElements.forEach((el, index) => {
            if (t.calendar.weekdays[index]) {
                el.textContent = t.calendar.weekdays[index];
            }
            });
        }

        const addTaskForDateBtn = document.getElementById('addTaskForDateBtn');
        if (addTaskForDateBtn) {
            addTaskForDateBtn.innerHTML = `<span style="font-size: 20px; margin-right: 4px;">+</span> ${t.calendar?.addTaskBtn || '+ Add task'}`;
        }

        const dashboardTitle = document.querySelector('.dashboard-header h1');
        if (dashboardTitle) dashboardTitle.textContent = t.dashboard?.title || 'Dashboard Overview';
        
        const dashboardSubtitle = document.querySelector('.dashboard-subtitle');
        if (dashboardSubtitle) dashboardSubtitle.textContent = t.dashboard?.subtitle || 'Review of your projects and tasks';

        const statLabels = document.querySelectorAll('.stat-label');
        if (statLabels[0]) statLabels[0].textContent = t.dashboard?.totalTasks || 'Total Tasks';
        if (statLabels[1]) statLabels[1].textContent = t.dashboard?.inProgress || 'In Progress';
        if (statLabels[2]) statLabels[2].textContent = t.dashboard?.completed || 'Completed';
        if (statLabels[3]) statLabels[3].textContent = t.dashboard?.productivity || 'Productivity';

        const chartTitles = document.querySelectorAll('.chart-title');
        if (chartTitles[0]) chartTitles[0].textContent = t.dashboard?.progressTitle || 'Task Progress';
        if (chartTitles[1]) chartTitles[1].textContent = t.dashboard?.prioritiesTitle || 'Priorities';

        const progressLabels = document.querySelectorAll('.progress-label span:first-child');
        if (progressLabels[0]) progressLabels[0].textContent = t.dashboard?.todoStatus || 'TO DO';
        if (progressLabels[1]) progressLabels[1].textContent = t.dashboard?.inProgressStatus || 'IN PROGRESS';
        if (progressLabels[2]) progressLabels[2].textContent = t.dashboard?.doneStatus || 'DONE';

        const priorityBadges = document.querySelectorAll('.priority-badge');
        if (priorityBadges[0]) priorityBadges[0].textContent = ` ${t.priorities?.urgent || 'Urgent'}`;
        if (priorityBadges[1]) priorityBadges[1].textContent = ` ${t.priorities?.high || 'High'}`;
        if (priorityBadges[2]) priorityBadges[2].textContent = ` ${t.priorities?.normal || 'Normal'}`;
        if (priorityBadges[3]) priorityBadges[3].textContent = ` ${t.priorities?.low || 'Low'}`;

        const activityTitle = document.querySelector('.activity-title');
        if (activityTitle) activityTitle.textContent = t.dashboard?.recentTitle || 'Recent Tasks';

        setTextSafe('#dateTaskModalTitle', t.calendar?.modalTitle || 'Add Plan');
        setTextSafe('#selectedDateTitle', t.calendar?.selectDate || 'Select Date');
        
        const selectedDateDisplay = document.getElementById('selectedDateDisplay');
        if (selectedDateDisplay && (selectedDateDisplay.textContent === '  ' || selectedDateDisplay.textContent === 'No date selected')) {
            selectedDateDisplay.textContent = t.calendar?.noDateSelected || 'No date selected';
        }
        
        setPlaceholderSafe('#taskTitleInput', t.calendar?.taskNamePlaceholder || 'TASK NAME');
        setPlaceholderSafe('#taskDescriptionInput', t.calendar?.descriptionPlaceholder || 'DESCRIPTION (optional)');
        
        const priorityLabel = document.querySelector('.option-label');
        if (priorityLabel) priorityLabel.textContent = t.calendar?.priorityLabel || 'Priority:';

        const priorityOptions = document.querySelectorAll('.priority-option');
        if (priorityOptions[0]) {
            const noPriorityText = priorityOptions[0].childNodes[1];
            if (noPriorityText) noPriorityText.nodeValue = ' ' + (t.calendar?.noPriority || 'No priority');
        }
        if (priorityOptions[1]) {
            const urgentText = priorityOptions[1].childNodes[1];
            if (urgentText) urgentText.nodeValue = ' ' + (t.priorities?.urgent || 'Urgent');
        }
        if (priorityOptions[2]) {
            const highText = priorityOptions[2].childNodes[1];
            if (highText) highText.nodeValue = ' ' + (t.priorities?.high || 'High');
        }
        if (priorityOptions[3]) {
            const normalText = priorityOptions[3].childNodes[1];
            if (normalText) normalText.nodeValue = ' ' + (t.priorities?.normal || 'Normal');
        }
        if (priorityOptions[4]) {
            const lowText = priorityOptions[4].childNodes[1];
            if (lowText) lowText.nodeValue = ' ' + (t.priorities?.low || 'Low');
        }

        setTextSafe('#saveDateTaskBtn .txt', t.calendar?.saveBtn || 'Save');

        const emptyStateText = document.querySelector('.empty-state p');
        if (emptyStateText && (emptyStateText.textContent.includes('') || emptyStateText.textContent.includes('Select'))) {
            emptyStateText.textContent = t.calendar?.emptyStateText || 'Select a date to see planned tasks';
        }
        }

        function applyLang(lang) {
        applyFullLanguage(lang);
        }

        (function(){
        function $(sel){ return document.querySelector(sel); }
        function $all(sel){ return Array.from(document.querySelectorAll(sel)); }

        function showNotification(message, type = 'info') {
            const container = $('#notificationContainer');
            if (!container) return;

            const notification = document.createElement('div');
            notification.className = `custom-notification ${type}`;
            
            const icons = {
            success: '',
            error: '',
            info: ''
            };

            notification.innerHTML = `
            <div class="custom-notification-icon">${icons[type] || icons.info}</div>
            <div class="custom-notification-message">${message}</div>
            <div class="custom-notification-close"></div>
            `;

            container.appendChild(notification);

            const closeBtn = notification.querySelector('.custom-notification-close');
            closeBtn.addEventListener('click', () => {
            notification.classList.add('removing');
            setTimeout(() => notification.remove(), 300);
            });

            setTimeout(() => {
            if (notification.parentElement) {
                notification.classList.add('removing');
                setTimeout(() => notification.remove(), 300);
            }
            }, 4000);
        }

        window.showNotification = showNotification;

        let quickCalendarDate = new Date(); 
        let activeTaskIdForQuickDate = null;

        let currentCalendarDate = new Date();
        let activeTaskIdForDate = null;

        let selectedDate = null;
        let selectedDateForTask = null;

        const monthNames = {
            en: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            ua: ['', '', '', '', '', '', '', '', '', '', '', ''],
            uk: ['', '', '', '', '', '', '', '', '', '', '', '']
        };

        function renderQuickCalendarContent() {
            const grid = document.getElementById('quickCalendarGrid');
            const title = document.getElementById('quickMonthTitle');
            if (!grid || !title) return;

            const year = quickCalendarDate.getFullYear();
            const month = quickCalendarDate.getMonth();
            const lang = localStorage.getItem('site_lang') || 'uk';
            const t = i18n[lang];
            
            title.textContent = `${monthNames[lang][month]} ${year}`;

            grid.innerHTML = '';

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            let startDay = firstDay.getDay(); 
            startDay = startDay === 0 ? 6 : startDay - 1;

            const prevLastDay = new Date(year, month, 0).getDate();
            for (let i = startDay - 1; i >= 0; i--) {
                const div = document.createElement('div');
                div.className = 'quick-day other-month';
                div.textContent = prevLastDay - i;
                grid.appendChild(div);
            }

            const today = new Date();
            for (let d = 1; d <= lastDay.getDate(); d++) {
                const div = document.createElement('div');
                const isToday = d === today.getDate() && month === today.getMonth() && year === today.getFullYear();
                
                const user = getCurrentUserData();
                const currentTask = user.tasks.find(t => t.id === activeTaskIdForQuickDate);
                const isSelected = currentTask && currentTask.date === `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;

                div.className = `quick-day ${isToday ? 'today' : ''} ${isSelected ? 'selected' : ''}`;
                div.textContent = d;
                
                div.onclick = () => {
                    const selectedDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                    applyDateToTask(selectedDate);
                };
                grid.appendChild(div);
            }

            let picker = document.getElementById('quickDatePicker');
            let footer = picker.querySelector('.quick-calendar-footer');

            if (!footer) {
                footer = document.createElement('div');
                footer.className = 'quick-calendar-footer';
                picker.appendChild(footer);
            }

            footer.innerHTML = `<button class="clear-date-btn" type="button">${t.calendar?.noDate || ' No date'}</button>`;
                footer.querySelector('.clear-date-btn').onclick = (e) => {
                e.stopPropagation();
                applyDateToTask(null);
            };
        }

        function statusClass(s) {
            return s === 'DONE' ? 'done' : s === 'IN PROGRESS' ? 'progress' : 'todo';
        }

        function dotClass(s) {
            return s === 'DONE' ? 'dot-done' : s === 'IN PROGRESS' ? 'dot-progress' : 'dot-todo';
        }

        function getUsers() {
            return JSON.parse(localStorage.getItem('users') || '[]');
        }

        function saveUsers(users) {
            localStorage.setItem('users', JSON.stringify(users));
        }

        function getCurrentUser() {
            return localStorage.getItem('currentUser');
        }

        function getCurrentUserData() {
            const email = getCurrentUser();
            const users = getUsers();
            return users.find(u => u.email === email);
        }

        function updateCurrentUserData(updateFn) {
            const users = getUsers();
            const email = getCurrentUser();
            const index = users.findIndex(u => u.email === email);
            if (index === -1) return;

            updateFn(users[index]);
            saveUsers(users);
        }

        function removeAllMenus() {
        document.querySelectorAll('.context-menu, .status-menu, .priority-menu').forEach(m => m.remove());
        }

        function showContextMenu(e, taskId) {
            e.preventDefault();
            removeAllMenus();

            const currentLang = localStorage.getItem('site_lang') || 'uk';
            const t = i18n[currentLang];

            const menu = document.createElement('div');
            menu.className = 'context-menu';
            
            menu.style.top = `${e.pageY}px`;
            menu.style.left = `${e.pageX}px`;

            menu.innerHTML = `
            <div class="menu-item" onclick="handleRename('${taskId}')">
                <span class="menu-icon"><img src="rename_icon.png" alt=""></span>
                <span class="menu-text">${t.taskActions?.rename || 'Rename'}</span>
            </div>
            
            <div class="menu-item sub-menu-trigger">
                <span class="menu-icon"><img src="type_icon.png" alt=""></span>
                <span class="menu-text">${t.taskActions?.taskType || 'Task Type'}</span>
                <span class="arrow-icon"></span>
            </div>
            
            <div class="menu-item" onclick="handleDuplicate('${taskId}')">
                <span class="menu-icon"><img src="duplicate_icon.png" alt=""></span>
                <span class="menu-text">${t.taskActions?.duplicate || 'Duplicate'}</span>
            </div>
            
            <div class="menu-item delete-item" onclick="handleDelete('${taskId}')">
                <span class="menu-icon"><img src="delete_icon.png" alt=""></span>
                <span class="menu-text">${t.taskActions?.delete || 'Delete'}</span>
            </div>
            `;

            document.body.appendChild(menu);

            const typeTrigger = menu.querySelector('.sub-menu-trigger');
            typeTrigger.onmouseenter = (e) => {
            console.log('Show task type options for:', taskId);
            };

            typeTrigger.onmouseenter = () => {
            showTaskTypeSubMenu(typeTrigger, taskId);
            };

            menu.querySelectorAll('.menu-item:not(.sub-menu-trigger)').forEach(item => {
            item.onmouseenter = () => {
                const sub = document.querySelector('.task-type-sub-menu');
                if (sub) sub.remove();
            };
            });
        }

        function showTaskTypeSubMenu(parentItem, taskId) {
            const oldSub = document.querySelector('.task-type-sub-menu');
            if (oldSub) oldSub.remove();

            const currentLang = localStorage.getItem('site_lang') || 'uk';
            const t = i18n[currentLang];

            const subMenu = document.createElement('div');
            subMenu.className = 'task-type-menu task-type-sub-menu';

            const rect = parentItem.getBoundingClientRect();

            subMenu.style.position = 'fixed';
            subMenu.style.top = `${rect.top}px`;
            subMenu.style.left = `${rect.left - 160}px`;

            const types = ['task', 'milestone', 'form', 'meeting'];
            
            subMenu.innerHTML = types.map(type => `
            <button class="task-type-sub-menu-btn" onclick="handleUpdateType('${taskId}', '${type}')">
                <span class="task-type-icon type-${type}"></span>
                ${t.taskTypes?.[type] || type.charAt(0).toUpperCase() + type.slice(1)}
            </button>
            `).join('');

            document.body.appendChild(subMenu);

            subMenu.onmouseleave = () => subMenu.remove();
        }

        function saveTask(task) {
            console.log('saveTask called', task);

            const user = getCurrentUser();
            console.log('currentUser', user);
            if (!user) {
            console.error('NO USER');
            showNotification('User not logged in', 'error');
            return;
            }

            updateCurrentUserData(user => {
            user.tasks.push(task);
            });
        }

        function updateTask(id, changes) {
            updateCurrentUserData(user => {
            const task = user.tasks.find(t => t.id === id);
            if (!task) return;
            Object.assign(task, changes);
            });
        }

        function saveUser(email, password) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            users.push({
            email,
            password,
            registeredAt: new Date().toISOString(),
            tasks: [],
            profile: {
                name: email.split('@')[0],
                avatarColor: null
            }
            });
            localStorage.setItem('users', JSON.stringify(users));
        }

        function findUser(email, password) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            return users.find(u => u.email === email && u.password === password);
        }

        function setCurrentUser(email) {
            localStorage.setItem('currentUser', email);
        }

        function logout() {
            localStorage.removeItem('currentUser');
        }

        function getEmailName(email) {
            return email.split('@')[0];
        }

        function restoreAddRow(row) {
            row.innerHTML = `<td colspan="7"><button class="add-task-btn">+ Add task</button></td>`;
            row.classList.remove('active');
            const input = row.querySelector('.task-name-input');
            if (input) input.value = '';

            const priorityBtn = row.querySelector('.priority-btn');
            if (priorityBtn) {
            setPriority(priorityBtn, 'none');
            }
        }

        function moveRowToGroup(row, status) {
            const tbody = document.querySelector('.table tbody');
            const group = tbody.querySelector(`.group-row[data-status="${status}"]`);
            if (!group) return;

            let insertBefore = group.nextElementSibling;
            while (
            insertBefore &&
            !insertBefore.classList.contains('group-row') &&
            !insertBefore.classList.contains('add-task-row')
            ) {
            insertBefore = insertBefore.nextElementSibling;
            }

            tbody.insertBefore(row, insertBefore);
        }

        function removeMenus() {
            document.querySelectorAll('.status-menu').forEach(m => m.remove());
        }

        function removeTypeMenu() {
            document.querySelectorAll('.task-type-menu').forEach(m => m.remove());
        }

        function removePriorityMenu() {
            document.querySelectorAll('.priority-menu').forEach(m => m.remove());
        }

        function renderCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            const calendarTitle = document.getElementById('calendarTitle');
            
            if (!calendarGrid || !calendarTitle) return;

            const lang = localStorage.getItem('site_lang') || 'uk';
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();

            calendarTitle.textContent = `${monthNames[lang][month]} ${year}`;

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const prevLastDay = new Date(year, month, 0);

            let firstDayOfWeek = firstDay.getDay();
            firstDayOfWeek = firstDayOfWeek === 0 ? 6 : firstDayOfWeek - 1;

            const daysInMonth = lastDay.getDate();
            const daysInPrevMonth = prevLastDay.getDate();

            calendarGrid.innerHTML = '';

            for (let i = firstDayOfWeek - 1; i >= 0; i--) {
            const day = daysInPrevMonth - i;
            const dayEl = createDayElement(day, 'prev-month', year, month - 1);
            calendarGrid.appendChild(dayEl);
            }

            for (let day = 1; day <= daysInMonth; day++) {
            const dayEl = createDayElement(day, 'current-month', year, month);
            calendarGrid.appendChild(dayEl);
            }

            const totalCells = calendarGrid.children.length;
            const remainingCells = 42 - totalCells;
            for (let day = 1; day <= remainingCells; day++) {
            const dayEl = createDayElement(day, 'next-month', year, month + 1);
            calendarGrid.appendChild(dayEl);
            }
        }

        function createDayElement(day, className, year, month) {
            const dayEl = document.createElement('div');
            dayEl.className = `calendar-day ${className}`;
            dayEl.textContent = day;

            const dateStr = formatDate(new Date(year, month, day));
            dayEl.dataset.date = dateStr;

            const today = new Date();
            if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate() && className === 'current-month') {
            dayEl.classList.add('today');
            }

            if (selectedDate === dateStr) {
            dayEl.classList.add('selected');
            }

            const tasksForDate = getTasksForDate(dateStr);
            if (tasksForDate.length > 0 && className === 'current-month') {
            const badge = document.createElement('div');
            badge.className = 'task-count-badge';
            badge.textContent = tasksForDate.length;
            dayEl.appendChild(badge);
            }

            dayEl.addEventListener('click', () => {
            if (className === 'current-month') {
                selectDate(dateStr);
            } else if (className === 'prev-month') {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                renderCalendar();
                selectDate(dateStr);
            } else if (className === 'next-month') {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                renderCalendar();
                selectDate(dateStr);
            }
            });

            return dayEl;
        }

        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function selectDate(dateStr) {
            selectedDate = dateStr;
            
            document.querySelectorAll('.calendar-day').forEach(day => day.classList.remove('selected'));
            const selectedDay = document.querySelector(`[data-date="${dateStr}"]`);
            if (selectedDay) selectedDay.classList.add('selected');

            if (activeTaskIdForDate) {
                updateTask(activeTaskIdForDate, { date: dateStr });
                
                console.log(`Task ${activeTaskIdForDate} updated with date ${dateStr}`);
                
                document.getElementById('calendarPopup').style.display = 'none';
                activeTaskIdForDate = null;
            }

            displayTasksForDate(dateStr);
        }

        function getTasksForDate(dateStr) {
            const user = getCurrentUserData();
            if (!user || !user.tasks) return [];
            
            return user.tasks.filter(task => task.date === dateStr);
        }

        function displayTasksForDate(dateStr) {
            const selectedDateTitle = document.getElementById('selectedDateTitle');
            const dateTasksList = document.getElementById('dateTasksList');
            const addTaskForDateBtn = document.getElementById('addTaskForDateBtn');
            
            if (!selectedDateTitle || !dateTasksList || !addTaskForDateBtn) return;

            const date = new Date(dateStr);
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const lang = localStorage.getItem('site_lang') || 'uk';
            const locale = lang === 'ua' || lang === 'uk' ? 'uk-UA' : 'en-US';
            const t = i18n[lang];
            
            selectedDateTitle.textContent = date.toLocaleDateString(locale, options);
            addTaskForDateBtn.style.display = 'flex';
            addTaskForDateBtn.innerHTML = `<span style="font-size: 20px; margin-right: 4px;">+</span> ${t.calendar?.addTaskBtn || '+ Add task'}`;

            const tasks = getTasksForDate(dateStr);
            
            if (tasks.length === 0) {
            const currentLang = localStorage.getItem('site_lang') || 'uk';
            const t = i18n[currentLang];
            dateTasksList.innerHTML = `
                <div class="empty-state">
                <div class="empty-icon"></div>
                <p>${t.calendar?.noTasks || 'No tasks for this date'}</p>
                </div>
            `;
            } else {
            dateTasksList.innerHTML = tasks.map(task => `
                <div class="date-task-card" data-task-id="${task.id}">
                <div class="task-card-header">
                    <div class="task-card-status">
                    <span class="task-status-dot ${dotClass(task.status)} type-task"></span>
                    <span class="task-card-title">${task.name}</span>
                    </div>
                    <button class="task-delete-btn" onclick="deleteTask('${task.id}')"></button>
                </div>
                ${task.description ? `<p class="task-card-description">${task.description}</p>` : ''}
                <div class="task-card-footer">
                    <span class="status ${statusClass(task.status)}">${task.status}</span>
                    ${task.priority && task.priority !== 'none' ? `<span class="priority-badge-small ${task.priority}">${task.priority}</span>` : ''}
                </div>
                </div>
            `).join('');
            }
        }

        function attachStatusMenu(row) {
            const statusEl = row.querySelector('.status');
            if (!statusEl) return;

            statusEl.onclick = e => {
            e.stopPropagation();
            removeMenus();

            const menu = document.createElement('div');
            menu.className = 'status-menu';
            menu.innerHTML = `
                <div class="status-item" data-status="TO DO"><span class="task-status-dot dot-todo type-task"></span> TO DO</div>
                <div class="status-item" data-status="IN PROGRESS"><span class="task-status-dot dot-progress type-task"></span> IN PROGRESS</div>
                <div class="status-item" data-status="DONE"><span class="task-status-dot dot-done type-task"></span> DONE</div>
            `;

            document.body.appendChild(menu);
            const r = statusEl.getBoundingClientRect();
            menu.style.top = r.bottom + 6 + 'px';
            menu.style.left = r.left + 'px';

            menu.querySelectorAll('.status-item').forEach(item => {
                item.onclick = () => {
                setStatus(row, item.dataset.status);
                removeMenus();
                };
            });
            };
        }

        function setStatus(row, status) {
            const badge = row.querySelector('.status');
            const dot = row.querySelector('.task-status-dot');

            badge.textContent = status;
            badge.className = 'status ' + statusClass(status);

            dot.classList.remove('dot-todo', 'dot-progress', 'dot-done');
            dot.classList.add(dotClass(status));

            moveRowToGroup(row, status);
            updateTask(row.dataset.id, { status });
        }

        function setTaskType(row, type) {
            const dot = row.querySelector('.task-status-dot');

            dot.classList.remove(
            'type-task',
            'type-milestone',
            'type-form',
            'type-meeting'
            );

            dot.classList.add(`type-${type}`);
            row.dataset.type = type;
        }

        function setPriority(cell, priority) {
            const img = cell.querySelector('img');
            const label = cell.querySelector('.priority-label');
            const row = cell.closest('tr');

            cell.dataset.priority = priority;

            const map = {
            urgent: { icon: 'urgent_icon.png', text: 'Urgent' },
            high:   { icon: 'high_icon.png',   text: 'High' },
            normal: { icon: 'normal_icon.png', text: 'Normal' },
            low:    { icon: 'low_icon.png',    text: 'Low' },
            none:   { icon: 'priority_icon.png', text: '' }
            };

            if (img) img.src = map[priority].icon;
            if (label) label.textContent = map[priority].text;

            updateTask(row.dataset.id, { priority });

            if (row && row.dataset.id) {
            updateTask(row.dataset.id, { priority });
            }
        }

        function formatShortDate(dateStr) {
            if (!dateStr) return '';
            const d = new Date(dateStr);
            if (isNaN(d.getTime())) return '';
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function openCalendarForTask(taskId, targetElement) {
            activeTaskIdForDate = taskId;
            
            const calendarView = document.getElementById('calendarView'); 
            if (!calendarView) return;

            calendarView.style.display = 'flex'; 
            
            calendarView.style.position = 'fixed';
            calendarView.style.top = '50%';
            calendarView.style.left = '50%';
            calendarView.style.transform = 'translate(-50%, -50%)';
            calendarView.style.zIndex = '10000';

            if (typeof renderCalendar === 'function') {
                renderCalendar(); 
            }
        }

        function openQuickCalendar(taskId, targetElement) {
            activeTaskIdForQuickDate = taskId;
            const picker = document.getElementById('quickDatePicker');
            if (!picker) return;

            const rect = targetElement.getBoundingClientRect();
            picker.style.display = 'block';
            picker.style.top = `${rect.bottom + window.scrollY + 5}px`;
            picker.style.left = `${rect.left}px`;

            renderQuickCalendarContent();
        }

        function applyDateToTask(dateStr) {
            if (activeTaskIdForQuickDate) {
                updateTask(activeTaskIdForQuickDate, { date: dateStr });

                const row = document.querySelector(`tr[data-id="${activeTaskIdForQuickDate}"]`);
                if (row) {
                    const dateBtn = row.querySelector('.date-btn');
                    if (dateBtn) {
                        if (dateStr) {
                            dateBtn.innerHTML = `<span class="date-text">${formatShortDate(dateStr)}</span>`;
                        } else {
                            dateBtn.innerHTML = `<img src="date_icon.png">`;
                        }
                    }
                }

                if (typeof renderCalendar === 'function') {
                    renderCalendar(); 
                }

                if (typeof showNotification === 'function') {
                    const currentLang = localStorage.getItem('site_lang') || 'uk';
                    const t = i18n[currentLang];
                    showNotification(dateStr ? (t.calendar?.dateUpdated || 'Date updated') : (t.calendar?.dateRemoved || 'Date removed'), 'success');
                }
            }
            
            const picker = document.getElementById('quickDatePicker');
            if (picker) picker.style.display = 'none';
        }

        function createTaskRow(task) {
            const row = document.createElement('tr');
            row.dataset.id = task.id;
            row.dataset.status = task.status;

            const dateHtml = task.date 
                ? `<span class="date-text">${formatShortDate(task.date)}</span>` 
                : `<img src="date_icon.png">`;

            row.innerHTML = `
            <td>
                <div class="name-cell">
                <span class="task-status-dot ${dotClass(task.status)} type-task"></span>
                ${task.name}
                </div>
            </td>
            <td class="icon-cell"></td>
            <td class="icon-cell date-btn">${dateHtml}</td>
            <td class="icon-cell priority-btn" data-priority="${task.priority || 'none'}">
                <img src="priority_icon.png">
                <span class="priority-label"></span>
            </td>
            <td><span class="status ${statusClass(task.status)}">${task.status}</span></td>
            <td class="icon-cell"><img src="comment_icon.png"></td>
            <td class="icon-cell">
                <button class="task-menu-btn" style="color: #666; background: none; border: none;"></button>
            </td>
            `;
            return row;
        }

        function renderTask(task, addRow) {
            const row = createTaskRow(task);

            const dateBtn = row.querySelector('.date-btn');
            if (dateBtn) {
                dateBtn.onclick = (e) => {
                    e.stopPropagation();
                    openQuickCalendar(task.id, dateBtn); 
                };
            }

            if (addRow) {
                addRow.parentNode.insertBefore(row, addRow);
            }

            attachStatusMenu(row);
            setTaskType(row, task.type || 'task');

            const priorityCell = row.querySelector('.priority-btn');
            if (priorityCell) {
                setPriority(priorityCell, task.priority || 'none');
            }

            row.oncontextmenu = (e) => showContextMenu(e, task.id);
            
            const menuBtn = row.querySelector('.task-menu-btn');
            if (menuBtn) {
                menuBtn.onclick = (e) => {
                    e.stopPropagation();
                    showContextMenu(e, task.id);
                };
            }
        }

        function loadUserTasks() {
            const user = getCurrentUserData();
            if (!user || !user.tasks) return;

            document
            .querySelectorAll('.table tbody tr:not(.group-row):not(.add-task-row)')
            .forEach(r => r.remove());

            user.tasks.forEach(task => {
            const addRow = document.querySelector(
                `.add-task-row[data-status="${task.status}"]`
            );
            renderTask(task, addRow);
            });
        }

        window.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('site_lang') || 'uk';
            applyFullLanguage(savedLang);
            const header = $('.home-header');
            const modalLog = $('.modal-overlay-log');
            const modalStart = $('.modal-overlay-start');
            const modalReset = $('.reset-password');
            const btnStart = $('.btn-start');
            const btnHero = $('.hero-btn');
            const heroSection = $('.hero-section')
            const btnLogin = $('.login');
            const userInfo = $('#userInfo');
            const authButtons = $('#authButtons');
            const userName = $('#userName');
            const logoutBtn = $('#logoutBtn');
            const footer = $('.footer');
            const avatarLetter = document.getElementById('avatarLetter');
            const userAvatar = document.getElementById('userAvatar');

            function updateUIForUser() {
            const currentUser = getCurrentUser();
            const landing = document.getElementById('landingPage');
            const dashboard = document.getElementById('dashboardPage');

            if (currentUser) {
                landing.style.display = 'none';
                dashboard.style.display = 'flex';
                
                if (userInfo) {
                userInfo.style.display = 'flex';
                const userData = getCurrentUserData();
                const displayName = userData?.profile?.name || getEmailName(currentUser);
                
                if (userName) userName.textContent = displayName;
                if (avatarLetter && userAvatar) {
                    avatarLetter.textContent = displayName[0].toUpperCase();
                    const avatarColor = userData?.profile?.avatarColor || generateColor(displayName);
                    userAvatar.style.background = avatarColor;
                }
                }
            } else {
                landing.style.display = 'flex';
                dashboard.style.display = 'none';
                if (userInfo) userInfo.style.display = 'none';
            }
            }

            function generateColor(str) {
                let hash = 0;
                for (let i = 0; i < str.length; i++) {
                    hash = str.charCodeAt(i) + ((hash << 5) - hash);
                }
                return `hsl(${hash % 360}, 55%, 45%)`;
            }

            const modalProfile = document.getElementById('modalProfile');
            const closeProfileModal = document.getElementById('closeProfileModal');
            const openProfileBtn = document.getElementById('openProfileBtn');
            const saveProfileBtn = document.getElementById('saveProfileBtn');

            function openProfileModal() {
            const user = getCurrentUserData();
            if (!user) return;

            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');
            const profileLetter = document.getElementById('profileLetter');
            const profileAvatarLarge = document.getElementById('profileAvatarLarge');
            const profileNameInput = document.getElementById('profileNameInput');
            const profileRegistered = document.getElementById('profileRegistered');
            
            const totalTasks = user.tasks ? user.tasks.length : 0;
            const completedTasks = user.tasks ? user.tasks.filter(t => t.status === 'DONE').length : 0;
            const productivity = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

            const displayName = user.profile?.name || user.email.split('@')[0];
            
            if (profileName) profileName.textContent = displayName;
            if (profileEmail) profileEmail.textContent = user.email;
            if (profileNameInput) profileNameInput.value = displayName;
            
            if (profileLetter && profileAvatarLarge) {
                profileLetter.textContent = displayName[0].toUpperCase();
                const color = user.profile?.avatarColor || generateColor(displayName);
                profileAvatarLarge.style.background = color;
            }

            if (profileRegistered && user.registeredAt) {
                const date = new Date(user.registeredAt);
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const lang = localStorage.getItem('site_lang') || 'uk';
                const locale = lang === 'ua' || lang === 'uk' ? 'uk-UA' : 'en-US';
                profileRegistered.textContent = date.toLocaleDateString(locale, options);
            }

            document.getElementById('profileTotalTasks').textContent = totalTasks;
            document.getElementById('profileCompletedTasks').textContent = completedTasks;
            document.getElementById('profileProductivity').textContent = productivity + '%';

            openOverlay(modalProfile);
            }

            if (openProfileBtn) {
            openProfileBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const userMenu = document.getElementById('userMenu');
                if (userMenu) userMenu.classList.remove('open');
                openProfileModal();
            });
            }

            if (closeProfileModal) {
            closeProfileModal.addEventListener('click', () => {
                closeOverlay(modalProfile);
            });
            }

            if (modalProfile) {
            modalProfile.addEventListener('click', (e) => {
                if (e.target === modalProfile) {
                closeOverlay(modalProfile);
                }
            });
            }

            if (saveProfileBtn) {
            saveProfileBtn.addEventListener('click', () => {
                const profileNameInput = document.getElementById('profileNameInput');
                const newName = profileNameInput?.value.trim();
                const currentLang = localStorage.getItem('site_lang') || 'uk';
                const t = i18n[currentLang];
                
                if (!newName) {
                showNotification(t.profile?.enterName || 'Enter profile name', 'error');
                return;
                }

                updateCurrentUserData(user => {
                if (!user.profile) user.profile = {};
                user.profile.name = newName;
                user.profile.avatarColor = generateColor(newName);
                });

                const user = getCurrentUserData();
                const userName = document.getElementById('userName');
                const avatarLetter = document.getElementById('avatarLetter');
                const userAvatar = document.getElementById('userAvatar');
                
                if (userName) userName.textContent = newName;
                if (avatarLetter) avatarLetter.textContent = newName[0].toUpperCase();
                if (userAvatar) userAvatar.style.background = generateColor(newName);

                closeOverlay(modalProfile);
                showNotification(t.profile?.profileUpdated || 'Profile updated!', 'success');
            });
            }

            const languageDropdownBtn = document.getElementById('languageDropdownBtn');
            const languageDropdownMenu = document.getElementById('languageDropdownMenu');
            const selectedLangFlag = document.getElementById('selectedLangFlag');
            const selectedLangName = document.getElementById('selectedLangName');

            if (languageDropdownBtn && languageDropdownMenu) {
            languageDropdownBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                languageDropdownBtn.classList.toggle('open');
                languageDropdownMenu.classList.toggle('open');
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-dropdown')) {
                languageDropdownBtn.classList.remove('open');
                languageDropdownMenu.classList.remove('open');
                }
            });

            const languageOptions = document.querySelectorAll('.language-option');
            languageOptions.forEach(option => {
                option.addEventListener('click', () => {
                const selectedLang = option.dataset.lang;
                const flag = option.querySelector('.lang-flag').textContent;
                const name = option.querySelector('.lang-name').textContent;
                
                if (selectedLangFlag) selectedLangFlag.textContent = flag;
                if (selectedLangName) selectedLangName.textContent = name;
                
                languageDropdownBtn.classList.remove('open');
                languageDropdownMenu.classList.remove('open');
                
                applyFullLanguage(selectedLang);
                
                updateCurrentUserData(user => {
                    if (!user.profile) user.profile = {};
                    user.profile.language = selectedLang;
                });
                
                const aiChat = document.getElementById('aiChat');
                if (aiChat) {
                    aiChat.innerHTML = '';
                    initAIGreeting();
                }
                
                const t = i18n[selectedLang];
                showNotification(t.languageChanged || 'Language changed', 'success');
                });
            });
            }

            function initLanguageDropdown() {
            const user = getCurrentUserData();
            const currentLang = user?.profile?.language || localStorage.getItem('site_lang') || 'uk';
            const t = i18n[currentLang];
            
            const langData = {
                'uk': { flag: '', name: t.profile?.ukrainian || '' },
                'en': { flag: '', name: t.profile?.english || 'English' }
            };
            
            if (selectedLangFlag && selectedLangName && langData[currentLang]) {
                selectedLangFlag.textContent = langData[currentLang].flag;
                selectedLangName.textContent = langData[currentLang].name;
            }

            const languageOptions = document.querySelectorAll('.language-option');
            languageOptions.forEach(option => {
                const langName = option.querySelector('.lang-name');
                if (option.dataset.lang === 'uk' && langName) {
                langName.textContent = t.profile?.ukrainian || '';
                } else if (option.dataset.lang === 'en' && langName) {
                langName.textContent = t.profile?.english || 'English';
                }
            });
            
            applyFullLanguage(currentLang);
            }

            if (modalProfile) {
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                if (mutation.attributeName === 'style') {
                    const display = modalProfile.style.display;
                    if (display === 'flex') {
                    initLanguageDropdown();
                    }
                }
                });
            });
            
            observer.observe(modalProfile, { attributes: true });
            }

            updateUIForUser(true);

            const userEmail = getCurrentUser();
            if (userEmail) {
            loadUserTasks();
            }

            if (logoutBtn) {
            logoutBtn.addEventListener('click', () => {
                logout();
                updateUIForUser();
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.loggedOut, 'info');
            });
            }

            try {
            if (header) header.style.display = 'flex';
            if (modalLog) modalLog.style.display = 'none';
            if (modalStart) modalStart.style.display = 'none';
            if (modalReset) modalReset.style.display = 'none';
            } catch(e){
            console.warn('init display error', e);
            }

            function openOverlay(overlay){
            if (!overlay) return;
            overlay.style.display = 'flex';
            const first = overlay.querySelector('input, button, a, [tabindex]'); 
            if (first) first.focus();
            document.body.style.overflow = 'hidden';
            }
            function closeOverlay(overlay){
            if (!overlay) return;
            overlay.style.display = 'none';
            document.body.style.overflow = '';
            }

            if (btnStart) {
            btnStart.addEventListener('click', (e) => {
                e.preventDefault();
                openOverlay(modalStart);
            });
            }
            if (btnHero) {
            btnHero.addEventListener('click', (e) => {
                e.preventDefault();
                openOverlay(modalStart);
            });
            }
            if (btnLogin) {
            btnLogin.addEventListener('click', (e) => {
                e.preventDefault();
                openOverlay(modalLog);
            });
            }

            $all('.close-btn').forEach(cb => {
            cb.addEventListener('click', (e) => {
                const modal = e.target.closest('.modal');
                if (!modal) return;
                const overlay = modal.closest('.modal-overlay-log') || modal.closest('.modal-overlay-start') || modal.closest('.reset-password');
                if (overlay) closeOverlay(overlay);
            });
            });

            [modalLog, modalStart, modalReset].forEach(ov => {
            if (!ov) return;
            ov.addEventListener('click', (e) => {
                if (e.target === ov) closeOverlay(ov);
            });
            });

            if (modalLog) {
            const resetLink = modalLog.querySelector('.dop-links a[href=""]') || Array.from(modalLog.querySelectorAll('a')).find(a => /reset/i.test(a.textContent));
            if (resetLink) {
                resetLink.addEventListener('click', (e) => {
                e.preventDefault();
                closeOverlay(modalLog);
                openOverlay(modalReset);
                });
            }
            }

            if (modalReset) {
            const cancelLink = modalReset.querySelector('.dop-links a[href=""]') || Array.from(modalReset.querySelectorAll('a')).find(a => /cancel/i.test(a.textContent));
            if (cancelLink) {
                cancelLink.addEventListener('click', (e) => {
                e.preventDefault();
                closeOverlay(modalReset);
                });
            }
            }

            $all('.modal .email-btn').forEach(b => {
            b.addEventListener('click', (e) => {
                const overlay = b.closest('.modal').closest('.modal-overlay-log') || b.closest('.modal').closest('.modal-overlay-start') || b.closest('.modal').closest('.reset-password');
                if (overlay) {
                setTimeout(()=> closeOverlay(overlay), 120);
                }
            });
            });

            const langBtn = $('.lang-btn');
            const dropdown = $('.lang-dropdown');
            const wrapper = $('.language-selector');

            if (langBtn && dropdown && wrapper) {
            langBtn.setAttribute('aria-haspopup','listbox');
            langBtn.setAttribute('aria-expanded','false');

            function toggleLang(){
                const shown = dropdown.classList.toggle('show');
                langBtn.setAttribute('aria-expanded', shown ? 'true' : 'false');
                const arrow = langBtn.querySelector('.arrow');
                if (arrow) arrow.style.transform = shown ? 'rotate(180deg)' : '';
                if (shown) {
                const first = dropdown.querySelector('li');
                if (first) first.focus();
                } else {
                langBtn.focus();
                }
            }

            langBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleLang();
            });

            langBtn.addEventListener('keydown', (e) => {
                if (['ArrowDown','Enter',' '].includes(e.key)) {
                e.preventDefault();
                toggleLang();
                } else if (e.key === 'Escape') {
                dropdown.classList.remove('show');
                langBtn.setAttribute('aria-expanded','false');
                langBtn.focus();
                }
            });

            dropdown.addEventListener('click', (e) => {
                const li = e.target.closest('li');
                if (!li) return;
                const lang = li.dataset.lang;
                if (lang) {
                    langBtn.childNodes[0].nodeValue = ' ' + li.textContent + ' ';
                    try { localStorage.setItem('site_lang', lang); } catch(e){}
                    
                    applyLang(lang);
                }
                dropdown.classList.remove('show');
                langBtn.setAttribute('aria-expanded','false');
                const arrow = langBtn.querySelector('.arrow');
                if (arrow) arrow.style.transform = '';
            });

            document.addEventListener('click', (e) => {
                if (!wrapper.contains(e.target)) {
                dropdown.classList.remove('show');
                langBtn.setAttribute('aria-expanded','false');
                const arrow = langBtn.querySelector('.arrow'); if (arrow) arrow.style.transform = '';
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                dropdown.classList.remove('show');
                langBtn.setAttribute('aria-expanded','false');
                const arrow = langBtn.querySelector('.arrow'); if (arrow) arrow.style.transform = '';
                }
            });

            dropdown.querySelectorAll('li').forEach(li => {
                li.setAttribute('tabindex','0');
                li.addEventListener('keydown', (e) => {
                if (['Enter',' '].includes(e.key)) { e.preventDefault(); li.click(); }
                else if (e.key === 'ArrowDown') { e.preventDefault(); (li.nextElementSibling || dropdown.querySelector('li')).focus(); }
                else if (e.key === 'ArrowUp') { e.preventDefault(); (li.previousElementSibling || dropdown.querySelector('li:last-child')).focus(); }
                else if (e.key === 'Escape') { dropdown.classList.remove('show'); langBtn.setAttribute('aria-expanded','false'); langBtn.focus(); }
                });
            });

            try {
                const saved = localStorage.getItem('site_lang');
                if (saved) {
                const li = dropdown.querySelector(`li[data-lang="${saved}"]`);
                if (li) langBtn.childNodes[0].nodeValue = ' ' + li.textContent + ' ';
                }
            } catch(e){}
            }

            console.info('schedule.js initialized', {
            headerExists: !!header,
            modalLogExists: !!modalLog,
            modalStartExists: !!modalStart,
            modalResetExists: !!modalReset,
            btnStartExists: !!btnStart,
            btnLoginExists: !!btnLogin,
            langBtnExists: !!langBtn
            });

            const registerButton = $('#registerButton');
            const loginButton = $('#loginButton');
            const resetPasswordButton = $('#resetPasswordButton');
            const switchToLogin = $('#switchToLogin');
            const switchToRegister = $('#switchToRegister');
            const resetPasswordLinkBtn = $('#resetPasswordLink');
            const cancelReset = $('#cancelReset');

            if (switchToLogin) {
            switchToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                closeOverlay(modalStart);
                openOverlay(modalLog);
            });
            }

            if (switchToRegister) {
            switchToRegister.addEventListener('click', (e) => {
                e.preventDefault();
                closeOverlay(modalLog);
                openOverlay(modalStart);
            });
            }

            if (resetPasswordLinkBtn) {
            resetPasswordLinkBtn.addEventListener('click', (e) => {
                e.preventDefault();
                closeOverlay(modalLog);
                openOverlay(modalReset);
            });
            }

            if (cancelReset) {
            cancelReset.addEventListener('click', (e) => {
                e.preventDefault();
                closeOverlay(modalReset);
                openOverlay(modalLog);
            });
            }

            if (registerButton) {
            registerButton.addEventListener('click', (e) => {
                e.preventDefault();
                const email = $('#regEmail')?.value;
                const password = $('#regPassword')?.value;
                const confirmPassword = $('#regConfirmPassword')?.value;
                
                if (!email || !password || !confirmPassword) {
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.fillAll, 'error');
                return;
                }

                if (password !== confirmPassword) {
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.passwordsMismatch, 'error');
                return;
                }

                const users = JSON.parse(localStorage.getItem('users') || '[]');
                if (users.find(u => u.email === email)) {
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.userExists, 'error');
                return;
                }

                saveUser(email, password);
                setCurrentUser(email);
                loadUserTasks();

                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.registerSuccess(getEmailName(email)), 'success');
                
                $('#regEmail').value = '';
                $('#regPassword').value = '';
                $('#regConfirmPassword').value = '';
                
                updateUIForUser();
                
                closeOverlay(modalStart);
            });
            }

            if (loginButton) {
            loginButton.addEventListener('click', (e) => {
                e.preventDefault();
                const email = $('#loginEmail')?.value;
                const password = $('#loginPassword')?.value;

                if (!email || !password) {
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.fillAll, 'error');
                return;
                }

                const user = findUser(email, password);
                if (!user) {
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.loginError, 'error');
                return;
                }

                setCurrentUser(email);
                loadUserTasks();

                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.loginSuccess(getEmailName(email)), 'success');
                
                $('#loginEmail').value = '';
                $('#loginPassword').value = '';
                
                updateUIForUser();
                
                closeOverlay(modalLog);
            });
            }

            if (resetPasswordButton) {
            resetPasswordButton.addEventListener('click', (e) => {
                e.preventDefault();
                const email = $('#resetEmail')?.value;

                if (!email) {
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.resetSent, 'info');
                return;
                }

                console.log('Reset password for:', email);
                const t = i18n[localStorage.getItem('site_lang') || 'en'];
                showNotification(t.notifications.resetSent, 'info');
                
                closeOverlay(modalReset);
            });
            }

            const viewTabs = document.querySelectorAll('.view-tab');
            const listView = document.getElementById('listView');
            const boardView = document.getElementById('boardView');

            const sidebarItems = document.querySelectorAll('.sidebar-item');
            const mainWindow = document.querySelector('.main-window');
            const aiAssistant = document.getElementById('aiAssistant');
            
            sidebarItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                sidebarItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                if (index === 2) {
                if (mainWindow) mainWindow.style.display = 'none';
                if (aiAssistant) aiAssistant.style.display = 'flex';
                setTimeout(() => initAIGreeting(), 100);
                } else {
                if (mainWindow) mainWindow.style.display = 'flex';
                if (aiAssistant) aiAssistant.style.display = 'none';
                }
            });
            });







            const TASK_TYPES = {
            task: {
                label: 'Task',
                class: 'type-task'
            },
            milestone: {
                label: 'Milestone',
                class: 'type-milestone'
            },
            form: {
                label: 'Form Response',
                class: 'type-form'
            },
            meeting: {
                label: 'Meeting Note',
                class: 'type-meeting'
            }
            };

            const checkboxes = document.querySelectorAll('.check');
            checkboxes.forEach(check => {
            check.addEventListener('click', function() {
                this.style.background = this.style.background === 'rgb(59, 130, 246)' ? '' : '#3b82f6';
                this.innerHTML = this.style.background ? '' : '';
                this.style.color = 'white';
                this.style.display = 'flex';
                this.style.alignItems = 'center';
                this.style.justifyContent = 'center';
                this.style.fontSize = '10px';
            });
            });

            document.querySelector('.table tbody').addEventListener('click', e => {
            const btn = e.target.closest('.add-task-btn');
            if (!btn) return;

            const row = btn.closest('.add-task-row');
            const status = row.dataset.status;

            row.innerHTML = `
                <td colspan="7">
                <div class="add-task-input">
                    <span class="task-status-dot ${dotClass(status)} type-task"></span>

                    <input
                    class="task-name-input"
                    placeholder="Task Name or type '/' for commands"
                    >

                    <div class="add-task-actions">
                    <div class="task-type-btn" data-type="task">
                        <span class="task-status-dot type-task"></span>
                        <span class="task-type-label">Task</span>
                    </div>

                    <button class="add-task-icon" title="Due date">
                        <img src="date_icon.png">
                    </button>

                    <div class="priority-btn" data-priority="none">
                        <img src="priority_icon.png">
                        <span class="priority-label"></span>
                    </div>

                    <span class="task-cancel">Cancel</span>
                    <button type="button" class="task-save">Save </button>
                    </div>
                </div>
                </td>
            `;

            row.querySelector('.task-name-input').focus();
            });

            document.addEventListener('click', e => {
            if (!e.target.classList.contains('task-cancel')) return;

            const row = e.target.closest('.add-task-row');
            restoreAddRow(row);
            });

            document.addEventListener('click', e => {
            const saveBtn = e.target.closest('.task-save');
            if (!saveBtn) return;
            
            console.log('SAVE BUTTON CLICKED', saveBtn);

            const row = saveBtn.closest('.add-task-row');
            const input = row.querySelector('.task-name-input');
            if (!input) return;

            const name = input.value.trim();
            if (!name) return;

            const status = row.dataset.status;
            const type = row.dataset.type || 'task';

            const priorityBtn = row.querySelector('.priority-btn');
            const currentPriority = priorityBtn ? priorityBtn.dataset.priority : 'none';

            const task = {
                id: 'task-' + Date.now() + '-' + Math.floor(Math.random() * 1000),
                name,
                status,
                type,
                priority: currentPriority
            };
            const taskRow = createTaskRow(task);

            console.log('TASK TO SAVE', task);

            saveTask(task);

            renderTask(task, row); 

            input.value = '';
            if (typeof restoreAddRow === 'function') {
                restoreAddRow(row);
            }
            });

            document.addEventListener('click', e => {
            const btn = e.target.closest('.task-type-btn');
            if (!btn) return;

            e.stopPropagation();
            removeTypeMenu();

            const menu = document.createElement('div');
            menu.className = 'task-type-menu';

            menu.innerHTML = Object.entries(TASK_TYPES)
                .map(([key, t]) => `
                <button data-type="${key}">
                    <span class="task-status-dot ${t.class}"></span>
                    ${t.label}
                </button>
                `).join('');

            document.body.appendChild(menu);

            const r = btn.getBoundingClientRect();
            menu.style.top = r.bottom + 6 + 'px';
            menu.style.left = r.left + 'px';

            menu.onclick = ev => {
                const item = ev.target.closest('button');
                if (!item) return;

                const addRow = btn.closest('.add-task-row');

                addRow.dataset.type = item.dataset.type;

                btn.querySelector('.task-type-label').textContent =
                TASK_TYPES[item.dataset.type].label;

                const dot = btn.querySelector('.task-status-dot');
                dot.className = 'task-status-dot ' + TASK_TYPES[item.dataset.type].class;

                removeTypeMenu();
            };
            });

            document.addEventListener('click', e => {
            if (
                e.target.closest('.task-type-menu') ||
                e.target.closest('.task-type-btn')
            ) return;

            removeTypeMenu();
            });

            document.addEventListener('keydown', e => {
            if (e.key === 'Enter' && e.target.classList.contains('task-name-input')) {
                const row = e.target.closest('.add-task-row');
                const saveBtn = row.querySelector('.task-save');
                if (saveBtn) {
                saveBtn.click();
                }
            }
            
            if (e.key === 'Escape' && e.target.classList.contains('task-name-input')) {
                const row = e.target.closest('.add-task-row');
                restoreAddRow(row);
            }
            });
            
            document.addEventListener('click', e => {
            const btn = e.target.closest('.priority-btn');
            if (!btn) return;

            e.stopPropagation();
            removePriorityMenu();

            const menu = document.createElement('div');
            menu.className = 'priority-menu';

            menu.innerHTML = `
                <button data-p="urgent"><img src="urgent_icon.png"> Urgent</button>
                <button data-p="high"><img src="high_icon.png"> High</button>
                <button data-p="normal"><img src="normal_icon.png"> Normal</button>
                <button data-p="low"><img src="low_icon.png"> Low</button>
                <button data-p="none"><img src="clear_icon.png"> Clear</button>
            `;

            document.body.appendChild(menu);

            const r = btn.getBoundingClientRect();
            menu.style.top = r.bottom + 6 + 'px';
            menu.style.left = r.left + 'px';

            menu.onclick = ev => {
                const item = ev.target.closest('button');
                if (!item) return;

                setPriority(btn, item.dataset.p);
                removePriorityMenu();
            };
            });

            document.addEventListener('click', e => {
            if (
                e.target.closest('.priority-menu') ||
                e.target.closest('.priority-btn')
            ) {
                return;
            }

            removePriorityMenu();
            });

            document.addEventListener('click', removeMenus);

            document
            .querySelectorAll('.table tbody tr:not(.group-row):not(.add-task-row)')
            .forEach(row => attachStatusMenu(row));


            document.addEventListener('click', e => {
            if (
                e.target.closest('.context-menu') || 
                e.target.closest('.status-menu') || 
                e.target.closest('.priority-menu') || 
                e.target.closest('.priority-btn') ||
                e.target.closest('.status') ||
                e.target.closest('.task-menu-btn')
            ) {
                return;
            }
            removeAllMenus();
            });


            




            const userTrigger = document.getElementById('userTrigger');
            const userMenu = document.getElementById('userMenu');
            const avatarArrow = document.getElementById('avatarArrow');

            userTrigger.addEventListener('click', (e) => {
                e.stopPropagation();
                userMenu.classList.toggle('open');
                avatarArrow.style.transform =
                    userMenu.classList.contains('open')
                        ? 'rotate(0deg)'
                        : 'rotate(180deg)';
            });

            document.addEventListener('click', () => {
                userMenu.classList.remove('open');
                avatarArrow.style.transform = 'rotate(180deg)';
            });


            const aiInput = document.getElementById('aiInput');
            const aiSendBtn = document.getElementById('aiSendBtn');
            const aiChat = document.getElementById('aiChat');

            function addAIMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `ai-message ${isUser ? 'ai-message-user' : 'ai-message-bot'}`;
            
            messageDiv.innerHTML = `
                <div class="ai-avatar">${isUser ? '' : ''}</div>
                <div class="ai-bubble">${message}</div>
            `;
            
            aiChat.appendChild(messageDiv);
            aiChat.scrollTop = aiChat.scrollHeight;
            }

            function analyzeTasksAI() {
            const tasks = [];
            const rows = document.querySelectorAll('.table tbody tr:not(.group-row):not([class*="add-task"])');
            
            rows.forEach(row => {
                const nameCell = row.querySelector('.name-cell');
                const statusCell = row.querySelector('.status');
                const priorityCell = row.querySelectorAll('td')[3];
                
                if (nameCell && statusCell) {
                const taskName = nameCell.textContent.trim();
                const status = statusCell.textContent.trim();
                const priority = priorityCell.querySelector('.icon')?.textContent || 'Not set';
                
                tasks.push({ name: taskName, status, priority });
                }
            });

            return tasks;
            }

            function generateAIResponse(userMessage) {
            const lowerMsg = userMessage.toLowerCase().trim();
            const currentLang = localStorage.getItem('site_lang') || 'uk';
            const t = i18n[currentLang];
            
            const hasWords = (words) => words.some(word => lowerMsg.includes(word));
            
            if (hasWords(['', '', '', 'analyze', 'task', '', ''])) {
                const tasks = analyzeTasksAI();
                
                if (tasks.length === 0) {
                return `<p>${t.ai?.noTasks || 'No tasks yet'}</p>`;
                }

                const inProgress = tasks.filter(task => task.status === 'IN PROGRESS').length;
                const todo = tasks.filter(task => task.status === 'TO DO').length;
                const done = tasks.filter(task => task.status === 'DONE').length;
                
                let response = `<p><strong>${t.ai?.taskAnalysis || ' Task Analysis:'}</strong></p>`;
                response += `<ul>`;
                response += `<li>${t.ai?.totalTasks || ' Total tasks:'} <strong>${tasks.length}</strong></li>`;
                response += `<li>${t.ai?.inProgress || ' In progress:'} <strong>${inProgress}</strong></li>`;
                response += `<li>${t.ai?.planned || ' Planned:'} <strong>${todo}</strong></li>`;
                response += `<li>${t.ai?.completed || ' Completed:'} <strong>${done}</strong></li>`;
                response += `</ul>`;
                
                response += `<p><strong>${t.ai?.recommendations || ' Recommendations:'}</strong></p><ul>`;
                
                if (inProgress > 3) {
                response += `<li>${t.ai?.manyInProgress || 'Many tasks in progress'} (${inProgress}). ${t.ai?.focusRecommendation || 'Focus on important tasks.'}</li>`;
                }
                
                if (todo > 5) {
                response += `<li>${t.ai?.setPriorities || 'Set priorities for'} ${todo} ${t.ai?.tasks || 'tasks.'}</li>`;
                }
                
                if (tasks.length > 0) {
                response += `<li>${t.ai?.startWithImportant || 'Start with important task'}</li>`;
                response += `<li>${t.ai?.setReminders || 'Set reminders'}</li>`;
                response += `<li>${t.ai?.markCompleted || 'Mark completed tasks!'}</li>`;
                }
                
                response += `</ul>`;
                
                return response;
            }

            if (hasWords(['', '', '', 'hello', 'hi', 'yo'])) {
                return `<p>${t.ai?.greeting || ' Hello!'}</p>
                        <p>${t.ai?.howCanHelp || 'How can I help? '}</p>`;
            }
            
            if (hasWords(['', 'fine', 'nice', 'okay', '', '', '', '', '', ''])) {
                return `<p>${t.ai?.great || ' Great!'}</p>`;
            }

            if (hasWords(['', '', '', '', 'thanks', 'thx'])) {
                return `<p>${t.ai?.happyToHelp || ' Always happy to help!'}</p>`;
            }

            if (hasWords(['', '', '', '', '', ' '])) {
                return `<p>${t.ai?.imHere || ' Okay, I\'m here if you need me.'}</p>`;
            }

            if (hasWords(['', '', '', '', ''])) {
                return `<p>${t.ai?.gladYouLiked || ' Glad you liked it!'}</p>`;
            }

            if (hasWords([' ', ' ', ' ', 'who', 'what', ''])) {
                return `<p>${t.ai?.iAmAssistant || ' I\'m an AI assistant that helps:'}</p>
                        <ul>
                        <li>${t.ai?.planDay2 || ' plan your day'}</li>
                        <li>${t.ai?.setPriorities2 || ' set priorities'}</li>
                        <li>${t.ai?.workProductively || ' work more productively'}</li>
                        </ul>`;
            }

            if (hasWords(['', '', 'schedule', '', '', '', 'time', 'day'])) {
                return `<p><strong>   :</strong></p>
                        <ul>
                        <li> <strong>09:00-11:00</strong> -   ( )</li>
                        <li> <strong>11:00-13:00</strong> -    </li>
                        <li> <strong>13:00-14:00</strong> -  </li>
                        <li> <strong>14:00-16:00</strong> -   </li>
                        <li> <strong>16:00-18:00</strong> -    </li>
                        </ul>
                        <p><strong>  Pomodoro:</strong></p>
                        <ul>
                        <li> 25  </li>
                        <li> 5  </li>
                        <li>  4  -   15-30 </li>
                        </ul>`;
            }
            
            if (hasWords(['', '', 'priority', '', ' important'])) {
                return `<p><strong>    :</strong></p>
                        <ul>
                        <li> <strong>Urgent</strong> -    ( !)</li>
                        <li> <strong>High</strong> - ,    ()</li>
                        <li> <strong>Medium</strong> -   ( )</li>
                        <li> <strong>Low</strong> -   (  )</li>
                        </ul>
                        <p><strong>  :</strong></p>
                        <ul>
                        <li><strong> + </strong> =  </li>
                        <li><strong>  + </strong> = </li>
                        <li><strong> +  </strong> = </li>
                        <li><strong>  +  </strong> = </li>
                        </ul>
                        <p>    Priority  ,   !</p>`;
            }
            
            if (hasWords(['', 'help', ' ', '', '', 'can', 'command'])) {
                return `<p><strong>  AI   !    :</strong></p>
                        <ul>
                        <li> <strong> </strong> - "  "</li>
                        <li> <strong> </strong> - "   "</li>
                        <li> <strong></strong> - "  "</li>
                        <li> <strong></strong> - "   "</li>
                        </ul>
                        <p><strong> :</strong></p>
                        <ul>
                        <li>" "</li>
                        <li>"  "</li>
                        <li>"  "</li>
                        <li>" "</li>
                        </ul>
                        <p> ,   ! </p>`;
            }
            
            if (hasWords(['prod', 'effect', 'advice', '', '', '', '', 'productivity'])) {
                return `<p><strong>   :</strong></p>
                        <ul>
                        <li> <strong> 2 </strong> -     2 ,   </li>
                        <li> <strong>' </strong> -    </li>
                        <li> <strong>Batch tasking</strong> -   </li>
                        <li> <strong> </strong> -    </li>
                        <li> <strong>Time blocking</strong> -   </li>
                        <li> <strong> </strong> -  </li>
                        <li> <strong> </strong> -   </li>
                        </ul>`;
            }
            
            return `<p>${t.ai?.goodQuestion || ' Good question! Here\'s what I can do for you:'}</p>
                    <ul>
                        <li>${t.ai?.analyzeCommand || ' "Analyze my tasks" - show statistics'}</li>
                        <li>${t.ai?.planDay || ' "Plan the day" - create schedule'}</li>
                        <li>${t.ai?.howToPrioritize || ' "How to prioritize" - explain system'}</li>
                        <li>${t.ai?.giveTips || ' "Give tips" - share productivity hacks'}</li>
                        <li>${t.ai?.helpCommand || ' "Help" - show all commands'}</li>
                    </ul>
                    <p>${t.ai?.justAsk || 'Just write the command in your own words! '}</p>`;
            }

            function sendAIMessage() {
            const message = aiInput.value.trim();
            if (!message) return;
            
            addAIMessage(message, true);
            aiInput.value = '';
            
            setTimeout(() => {
                const response = generateAIResponse(message);
                addAIMessage(response, false);
            }, 500);
            }

            if (aiSendBtn) {
            aiSendBtn.addEventListener('click', sendAIMessage);
            }

            if (aiInput) {
            aiInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                sendAIMessage();
                }
            });
            }

            function initAIGreeting() {
            const aiChat = document.getElementById('aiChat');
            if (!aiChat) return;
            
            const currentLang = localStorage.getItem('site_lang') || 'uk';
            const t = i18n[currentLang];
            
            const hasMessages = aiChat.children.length > 0;
            if (!hasMessages) {
                const greeting = `<p>${t.ai?.greeting || ' Hello!'}</p>
                                <p>${t.ai?.howCanHelp || 'How can I help? '}</p>
                                <br>
                                <p><strong>${t.ai?.goodQuestion || ' Good question! Here\'s what I can do for you:'}</strong></p>
                                <ul>
                                <li>${t.ai?.analyzeCommand || ' "Analyze my tasks" - show statistics'}</li>
                                <li>${t.ai?.planDay || ' "Plan the day" - create schedule'}</li>
                                <li>${t.ai?.howToPrioritize || ' "How to prioritize" - explain system'}</li>
                                <li>${t.ai?.giveTips || ' "Give tips" - share productivity hacks'}</li>
                                </ul>
                                <p>${t.ai?.justAsk || 'Just write the command in your own words! '}</p>`;
                
                addAIMessage(greeting, false);
            }
            }

            function updateDashboardStats() {
            const tasks = [];
            const rows = document.querySelectorAll('.table tbody tr:not(.group-row):not([class*="add-task"])');
            
            rows.forEach(row => {
                const nameCell = row.querySelector('.name-cell');
                const statusCell = row.querySelector('.status');
                const priorityBtn = row.querySelector('.priority-btn');

                if (!nameCell || !statusCell) return;

                tasks.push({
                name: nameCell.textContent.trim(),
                status: statusCell.textContent.trim(),
                priority: priorityBtn?.dataset.priority || ''
                });
            });

            const totalTasks = tasks.length;
            const inProgress = tasks.filter(t => t.status === 'IN PROGRESS').length;
            const completed = tasks.filter(t => t.status === 'DONE').length;
            const todo = tasks.filter(t => t.status === 'TO DO').length;
            const productivity = totalTasks > 0 ? Math.round((completed / totalTasks) * 100) : 0;

            const urgent = tasks.filter(t => t.priority.toLowerCase().includes('urgent')).length;
            const high = tasks.filter(t => t.priority.toLowerCase().includes('high')).length;
            const normal = tasks.filter(t => t.priority.toLowerCase().includes('normal')).length;
            const low = tasks.filter(t => t.priority.toLowerCase().includes('low')).length;

            const setTextSafe = (id, text) => {
                const el = document.getElementById(id);
                if (el) el.textContent = text;
            };

            setTextSafe('totalTasks', totalTasks);
            setTextSafe('inProgressTasks', inProgress);
            setTextSafe('completedTasks', completed);
            setTextSafe('productivity', productivity + '%');

            setTextSafe('todoCount', todo);
            setTextSafe('progressCount', inProgress);
            setTextSafe('doneCount', completed);

            setTextSafe('urgentCount', urgent);
            setTextSafe('highCount', high);
            setTextSafe('mediumCount', normal);
            setTextSafe('lowCount', low);

            const setBarWidth = (id, percentage) => {
                const el = document.getElementById(id);
                if (el) el.style.width = percentage + '%';
            };

            if (totalTasks > 0) {
                setBarWidth('todoBar', (todo / totalTasks) * 100);
                setBarWidth('progressBar', (inProgress / totalTasks) * 100);
                setBarWidth('doneBar', (completed / totalTasks) * 100);
            }

            const recentTasksContainer = document.getElementById('recentTasks');
            if (recentTasksContainer && tasks.length > 0) {
                recentTasksContainer.innerHTML = '';
                
                const recentTasks = tasks.slice(-5).reverse();
                
                recentTasks.forEach(task => {
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';
                
                let icon = '';
                let bgColor = '#3b82f6';
                
                if (task.status === 'DONE') {
                    icon = '';
                    bgColor = '#10b981';
                } else if (task.status === 'IN PROGRESS') {
                    icon = '';
                    bgColor = '#f59e0b';
                } else if (task.status === 'BLOCKED') {
                    icon = '';
                    bgColor = '#ef4444';
                }
                
                activityItem.innerHTML = `
                    <div class="activity-icon" style="background: ${bgColor};">${icon}</div>
                    <div class="activity-content">
                    <p class="activity-text">${task.name}</p>
                    <span class="activity-time">${task.status}${task.priority ? '  ' + task.priority : ''}</span>
                    </div>
                `;
                
                recentTasksContainer.appendChild(activityItem);
                });
            }
            }

            window.updateDashboardStats = updateDashboardStats;

            window.handleDelete = function(taskId) {
            if (confirm('Are you sure you want to delete this task?')) {
                updateCurrentUserData(user => {
                user.tasks = user.tasks.filter(t => t.id !== taskId);
                });
                
                const row = document.querySelector(`tr[data-id="${taskId}"]`);
                if (row) row.remove();
                
                removeAllMenus();
            }
            };

            window.handleUpdateType = function(taskId, type) {
            const row = document.querySelector(`tr[data-id="${taskId}"]`);
            if (row) {
                setTaskType(row, type);
                updateTask(taskId, { type: type });
            }
            removeAllMenus();
            };

            window.handleDuplicate = function(taskId) {
            const user = getCurrentUserData();
            const originalTask = user.tasks.find(t => t.id === taskId);
            if (!originalTask) return;

                const newTask = {
                    ...originalTask,
                    id: 'task-' + Date.now(),
                    name: originalTask.name + ' (copy)'
                };

                saveTask(newTask);
                
                const originalRow = document.querySelector(`tr[data-id="${taskId}"]`);
                
                renderTask(newTask, originalRow.nextSibling);
            
            removeAllMenus();
            };

            window.handleRename = function(taskId) {
            removeAllMenus();
            const row = document.querySelector(`tr[data-id="${taskId}"]`);
            if (!row) return;

            const nameCell = row.querySelector('.name-cell');
            const originalName = nameCell.innerText.trim();
            
            const dot = nameCell.querySelector('.task-status-dot');

            nameCell.innerHTML = '';
            if (dot) nameCell.appendChild(dot);

            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'rename-input';
            input.value = originalName;
            nameCell.appendChild(input);

            input.focus();
            input.select();

            const saveName = () => {
                const newName = input.value.trim() || originalName;
                
                updateTask(taskId, { name: newName });

                nameCell.innerHTML = '';
                if (dot) nameCell.appendChild(dot);
                nameCell.append(` ${newName}`);
            };

            input.onkeydown = (e) => {
                if (e.key === 'Enter') saveName();
                if (e.key === 'Escape') {
                input.value = originalName;
                saveName();
                }
            };

            input.onblur = saveName;
            };


            window.deleteTask = function(taskId) {
            if (!confirm('  ?')) return;
            
            updateCurrentUserData(user => {
                user.tasks = user.tasks.filter(t => t.id !== taskId);
            });
            
            if (selectedDate) {
                displayTasksForDate(selectedDate);
                renderCalendar();
            }
            
            showNotification(' ', 'success');
            };

            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');

            if (prevMonthBtn) {
            prevMonthBtn.addEventListener('click', () => {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                renderCalendar();
            });
            }

            if (nextMonthBtn) {
            nextMonthBtn.addEventListener('click', () => {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                renderCalendar();
            });
            }

            const addTaskForDateBtn = document.getElementById('addTaskForDateBtn');
            const modalDateTask = document.getElementById('modalDateTask');
            const closeDateTaskModal = document.getElementById('closeDateTaskModal');
            const saveDateTaskBtn = document.getElementById('saveDateTaskBtn');

            if (addTaskForDateBtn) {
            addTaskForDateBtn.addEventListener('click', () => {
                if (!selectedDate) return;
                
                selectedDateForTask = selectedDate;
                const date = new Date(selectedDate);
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const lang = localStorage.getItem('site_lang') || 'uk';
                const locale = lang === 'ua' || lang === 'uk' ? 'uk-UA' : 'en-US';
                
                document.getElementById('selectedDateDisplay').textContent = date.toLocaleDateString(locale, options);
                document.getElementById('taskTitleInput').value = '';
                document.getElementById('taskDescriptionInput').value = '';
                
                document.querySelectorAll('.priority-option').forEach(btn => {
                btn.classList.remove('active');
                });
                document.querySelector('.priority-option[data-priority="none"]').classList.add('active');
                
                openOverlay(modalDateTask);
            });
            }

            if (closeDateTaskModal) {
            closeDateTaskModal.addEventListener('click', () => {
                closeOverlay(modalDateTask);
            });
            }

            if (modalDateTask) {
            modalDateTask.addEventListener('click', (e) => {
                if (e.target === modalDateTask) {
                closeOverlay(modalDateTask);
                }
            });
            }

            document.querySelectorAll('.priority-option').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.priority-option').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
            });

            document.getElementById('prevMonth').onclick = () => {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth());
            renderCalendar();
            };

            document.getElementById('nextMonth').onclick = () => {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth());
            renderCalendar();
            };

            document.getElementById('quickPrevMonth').onclick = (e) => {
            e.stopPropagation();
            quickCalendarDate.setMonth(quickCalendarDate.getMonth() - 1);
            renderQuickCalendar();
            };

            document.getElementById('quickNextMonth').onclick = (e) => {
            e.stopPropagation();
            quickCalendarDate.setMonth(quickCalendarDate.getMonth() + 1);
            renderQuickCalendar();
            };

            if (saveDateTaskBtn) {
            saveDateTaskBtn.addEventListener('click', (e) => {
                e.preventDefault();
                
                const title = document.getElementById('taskTitleInput').value.trim();
                const description = document.getElementById('taskDescriptionInput').value.trim();
                const selectedPriority = document.querySelector('.priority-option.active');
                const priority = selectedPriority ? selectedPriority.dataset.priority : 'none';
                const currentLang = localStorage.getItem('site_lang') || 'uk';
                const t = i18n[currentLang];
                
                if (!title) {
                showNotification(t.calendar?.enterTitle || 'Enter task title', 'error');
                return;
                }
                
                const task = {
                id: 'task-' + Date.now() + '-' + Math.floor(Math.random() * 1000),
                name: title,
                description: description,
                date: selectedDateForTask,
                status: 'TO DO',
                type: 'task',
                priority: priority
                };
                
                saveTask(task);
                
                closeOverlay(modalDateTask);
                displayTasksForDate(selectedDateForTask);
                renderCalendar();
                
                showNotification(t.calendar?.addPlan || 'Plan added!', 'success');
            });
            }
            const qPrev = document.getElementById('quickPrevMonth');
            const qNext = document.getElementById('quickNextMonth');
            
            if (qPrev) qPrev.onclick = (e) => {
                e.stopPropagation();
                quickCalendarDate.setMonth(quickCalendarDate.getMonth() - 1);
                renderQuickCalendarContent();
            };
            
            if (qNext) qNext.onclick = (e) => {
                e.stopPropagation();
                quickCalendarDate.setMonth(quickCalendarDate.getMonth() + 1);
                renderQuickCalendarContent();
            };

            document.addEventListener('mousedown', (e) => {
                const picker = document.getElementById('quickDatePicker');
                if (picker && !picker.contains(e.target) && !e.target.closest('.date-btn')) {
                    picker.style.display = 'none';
                }
            });

            viewTabs.forEach((tab, index) => {
            const oldHandler = tab.onclick;
            tab.onclick = null;
            
            tab.addEventListener('click', () => {
                viewTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const calendarView = document.getElementById('calendarView');
                
                if (index === 0) {
                if (listView) listView.style.display = 'block';
                if (boardView) boardView.style.display = 'none';
                if (calendarView) calendarView.style.display = 'none';
                } else if (index === 1) {
                if (listView) listView.style.display = 'none';
                if (boardView) boardView.style.display = 'none';
                if (calendarView) {
                    calendarView.style.display = 'flex';
                    renderCalendar();
                }
                } else if (index === 2) {
                if (listView) listView.style.display = 'none';
                if (boardView) boardView.style.display = 'flex';
                if (calendarView) calendarView.style.display = 'none';
                updateDashboardStats();
                } else {
                if (listView) listView.style.display = 'none';
                if (boardView) boardView.style.display = 'none';
                if (calendarView) calendarView.style.display = 'none';
                }
            });
            });


        });
        })();
    </script>
</html>
